<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory Dynamic_model (Isabelle2019: June 2019)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory Dynamic_model</h1>

<span class="command">theory</span> <span class="name">Dynamic_model</span><br/>
<span class="keyword">imports</span> <a href="../../HOL/HOL/Main.html"><span class="name">Main</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="keyword1"><span class="command">theory</span></span><span> </span><span>Dynamic_model</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span>Main</span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Security State Machine &#8250;</span></span></span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>SM</span><span> </span><span class="delimiter">=</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>s0</span><span> </span><span class="delimiter">::</span><span> </span><span class="tfree">&#39;s</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>step</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;e &#8658; &#39;s&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>domain</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e &#8658; (&#39;d option)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>vpeq</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;d &#8658; &#39;s &#8658; bool&quot;</span></span></span><span>  </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ &#8764; _ &#8764; _)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">fixes</span></span><span> </span><span>interferes</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;d &#8658; &#39;s &#8658; &#39;d &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ @ _ &#8605;_)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">assumes</span></span><span> 
</span><span>    </span><span>vpeq_transitive_lemma</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; s t r d. (s &#8764; d &#8764; t) &#8743; (t &#8764; d &#8764; r) &#10230; (s &#8764; d &#8764; r)&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span>vpeq_symmetric_lemma</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; s t d. (s &#8764; d &#8764; t) &#10230; (t &#8764; d &#8764; s)&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span>vpeq_reflexive_lemma</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; s d. (s &#8764; d &#8764; s)&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>    </span><span>interf_reflexive</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d s. (d @ s &#8605; d)&quot;</span></span></span><span> 
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>   
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>non_interferes</span><span> </span><span class="delimiter">::</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;d &#8658; &#39;s &#8658; &#39;d &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ @ _ &#8726;&#8605; _)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(u @ s &#8726;&#8605; v) &#8801; (u @ s &#8605; v)&quot;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>ivpeq</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;d set &#8658; &#39;s &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ &#8776; _ &#8776; _)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ivpeq s D t &#8801; &#8704; d &#8712; D. (s &#8764; d &#8764; t)&quot;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>run</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;e list &#8658; &#39;s&quot;</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>run_Nil</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;run s [] = s&quot;</span></span></span><span> </span><span class="delimiter">|</span><span>
</span><span>            </span><span>run_Cons</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;run s (a#as) = run (step s a) as &quot;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>reachable</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;s &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ &#8618; _)&quot;</span></span></span><span> </span><span class="delimiter">[</span><span>70</span><span class="delimiter">,</span><span>71</span><span class="delimiter">]</span><span> </span><span>60</span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;reachable s1 s2 &#8801;  (&#8707;as. run s1 as = s2 )&quot;</span></span></span><span>
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>reachable0</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; bool&quot;</span></span></span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8801; reachable s0 s&quot;</span></span></span><span>
</span><span>      
</span><span>    </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>non_interferes_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>ivpeq_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>reachable_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span>
</span><span>            </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>reachable0_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>run.simps</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>run.simps</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachable_s0</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s0&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>SM.reachable_def</span><span> </span><span>SM_axioms</span><span> </span><span>reachable0_def</span><span> </span><span>run.simps</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span class="delimiter">)</span><span> 
</span><span>
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachable_self</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable s s&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>reachable_def</span><span> </span><span>run.simps</span><span class="delimiter">(</span><span>1</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachable_step</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#39; = step s a &#10233; reachable s s&#39;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#39; = step s a&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s&#39; = run s [a]&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>          
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>reachable_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> 
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>run_trans</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;C T V as bs. T = run C as &#8743; V = run T bs &#10230; V = run C (as@bs)&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>      </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>T</span><span> </span><span>V</span><span> </span><span>as</span><span> </span><span>bs</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;C. T = run C as &#8743; V = run T bs &#10230; V = run C (as@bs)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>c</span><span> </span><span>cs</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;C. T = run C cs &#8743; V = run T bs &#10230; V = run C (cs @ bs)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span>-</span><span>
</span><span>              </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>C</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T = run C (c # cs) &#8743; V = run T bs &#10230; V = run C ((c # cs) @ bs) &quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T = run C (c # cs) &#8743; V = run T bs&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>b0</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>C&#39;</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;C&#39; = step C c &#8743; T = run C&#39; cs&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>a0</span><span> </span><span>b0</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;V = run C&#39; (cs@bs)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>b2</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;V = run C ((c # cs) @ bs)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>append_Cons</span><span> </span><span>run_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>                  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachable_trans</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable C T; reachable T V&#10215; &#10233; reachable C V&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable C T&quot;</span></span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable T V&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;C = T &#8744; (&#8707;as. T = run C as)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;C = T&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>                </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>a1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T = V &#8744; (&#8707;as. V = run T as)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>c0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T=V&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">with</span></span><span> </span><span>a0</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>c0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#8707;as. V = run T as)&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>b0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>                  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8707;as. T = run C as&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>                </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>a1</span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T = V &#8744; (&#8707;as. V = run T as)&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>c0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T=V&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>                  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>c0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(&#8707;as. V = run T as)&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>b0</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>as</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>d0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;T = run C as&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">from</span></span><span> </span><span>c0</span><span> </span><span class="keyword3"><span class="command">obtain</span></span><span> </span><span>bs</span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>d1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;V = run T bs&quot;</span></span></span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>d0</span><span>  </span><span>run_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachableStep</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 C; C&#39; = step C a&#10215; &#10233; reachable0 C&#39;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>reachable0_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>reachable_step</span><span> </span><span>reachable_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>reachable0_reach</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 C; reachable C C&#39;&#10215; &#10233; reachable0 C&#39;&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span>  </span><span>reachable_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>reachable_def</span><span class="delimiter">[</span><span>cong</span><span> </span><span>del</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>reachable0_def</span><span class="delimiter">[</span><span>cong</span><span> </span><span>del</span><span class="delimiter">]</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Information flow security properties&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">locale</span></span><span> </span><span>SM_enabled</span><span> </span><span class="delimiter">=</span><span> </span><span>SM</span><span> </span><span>s0</span><span> </span><span>step</span><span> </span><span>domain</span><span> </span><span>vpeq</span><span> </span><span>interferes</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">for</span></span><span> </span><span>s0</span><span> </span><span class="delimiter">::</span><span> </span><span class="tfree">&#39;s</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>       </span><span>step</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;e &#8658; &#39;s&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>       </span><span>domain</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e &#8658; (&#39;d option)&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>       </span><span>vpeq</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;d &#8658; &#39;s &#8658; bool&quot;</span></span></span><span>  </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ &#8764; _ &#8764; _)&quot;</span></span></span><span class="delimiter">)</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>       </span><span>interferes</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;d &#8658; &#39;s &#8658; &#39;d &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ @ _ &#8605;_)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="delimiter">+</span><span>
</span><span>  
</span><span>    </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>enabled0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s a. reachable0 s &#10230; (&#8707; s&#39;. s&#39; = step s a)&quot;</span></span></span><span>
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>policy_respect</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v u s t. (s &#8764; u &#8764; t)
                              &#10230; (interferes v s u = interferes v t u)&quot;</span></span></span><span>
</span><span>   
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>enabled</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#10233; (&#8707; s&#39;. s&#39; = step s a)&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>enabled0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>sources</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e list &#8658; &#39;d &#8658; &#39;s &#8658; &#39;d set&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>      </span><span>sources_Nil</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;sources [] d s = {d}&quot;</span></span></span><span> </span><span class="delimiter">|</span><span>
</span><span>      </span><span>sources_Cons</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;sources (a # as) d s = (&#8899;{sources as d (step s a)}) &#8746; 
                              {w . w = the (domain a) &#8743; (&#8707;v . interferes w s v &#8743; v&#8712;sources as d (step s a))}&quot;</span></span></span><span>
</span><span>    </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>sources_Nil</span><span> </span><span class="delimiter">[</span><span>simp</span><span> </span><span>del</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>sources_Cons</span><span> </span><span class="delimiter">[</span><span>simp</span><span> </span><span>del</span><span class="delimiter">]</span><span>
</span><span>
</span><span>    
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">primrec</span></span><span> </span><span>ipurge</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e list &#8658; &#39;d &#8658; &#39;s  &#8658; &#39;e list&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>      </span><span>ipurge_Nil</span><span class="delimiter">:</span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge [] u s = []&quot;</span></span></span><span> </span><span class="delimiter">|</span><span>
</span><span>      </span><span>ipurge_Cons</span><span class="delimiter">:</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (a#as) u s = (if (the (domain a) &#8712; (sources (a#as) u s))
                                          then
                                              a # ipurge as u (step s a)
                                          else
                                              ipurge as u (step s a)
                                          )&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>observ_equivalence</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;s &#8658; &#39;e list &#8658; &#39;s &#8658; 
          &#39;e list &#8658; &#39;d &#8658; bool&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;(_ &#8882; _ &#8773; _ &#8882; _ @ _)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;observ_equivalence s as t bs d &#8801; 
               ((run s as) &#8764; d &#8764; (run t bs))&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>observ_equivalence_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>observ_equiv_sym</span><span class="delimiter">:</span><span>
</span><span>       </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; as &#8773; t &#8882; bs @ d) &#10233; (t &#8882; bs &#8773; s &#8882; as @ d)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>observ_equivalence_def</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>observ_equiv_trans</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 t; (s &#8882; as &#8773; t &#8882; bs @ d); (t &#8882; bs &#8773; x &#8882; cs @ d)&#10215; &#10233; (s &#8882; as &#8773; x &#8882; cs @ d)&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>observ_equivalence_def</span><span> </span><span>vpeq_transitive_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>noninterference_r</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference_r &#8801; &#8704;d as s. reachable0 s &#10230; (s &#8882; as &#8773; s &#8882; (ipurge as d s) @ d)&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>noninterference</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference &#8801; &#8704;d as. (s0 &#8882; as &#8773; s0 &#8882; (ipurge as d s0) @ d)&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weak_noninterference</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninterference &#8801; &#8704;d as bs. ipurge as d s0 = ipurge bs d s0
                                                  &#10230; (s0 &#8882; as &#8773; s0 &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>   
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weak_noninterference_r</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninterference_r &#8801; &#8704;d as bs s. reachable0 s &#8743; ipurge as d s = ipurge bs d s
                                                  &#10230; (s &#8882; as &#8773; s &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>noninfluence</span><span class="delimiter">::</span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> 
</span><span>       </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#8801; &#8704; d as s t. reachable0 s &#8743; reachable0 t
                                &#8743; (s &#8776; (sources as d s) &#8776; t)
                                &#10230; (s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weak_noninfluence</span><span> </span><span class="delimiter">::</span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninfluence &#8801; &#8704; d as bs s t . reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
                                     &#8743; ipurge as d t = ipurge bs d t
                                     &#10230; (s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>weak_noninfluence2</span><span> </span><span class="delimiter">::</span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninfluence2 &#8801; &#8704; d as bs s t . reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
                                     &#8743; ipurge as d s = ipurge bs d t
                                     &#10230; (s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>nonleakage</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;nonleakage &#8801; &#8704;d as s t. reachable0 s &#8743; reachable0 t
                          &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>noninterference_r_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>noninterference_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>weak_noninterference_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span>
</span><span>        </span><span>weak_noninterference_r_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>noninfluence_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>        </span><span>weak_noninfluence_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>weak_noninfluence2_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>nonleakage_def</span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Unwinding conditions&#8250;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>dynamic_step_consistent</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> 
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_step_consistent &#8801;  &#8704;a d s t. reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743; 
                              (((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; (the (domain a)) &#8764; t))
                              &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>dynamic_weakly_step_consistent</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> 
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_weakly_step_consistent &#8801;  &#8704;a d s t. reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743;
                              ((the (domain a)) @ s &#8605; d) &#8743; (s &#8764; (the (domain a)) &#8764; t) 
                              &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>dynamic_weakly_step_consistent_e</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e &#8658; bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span> 
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_weakly_step_consistent_e a &#8801;  &#8704;d s t. reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743;
                              ((the (domain a)) @ s &#8605; d) &#8743; (s &#8764; (the (domain a)) &#8764; t) 
                              &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>dynamic_weakly_step_consistent_all_evt</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_weakly_step_consistent = (&#8704;a. dynamic_weakly_step_consistent_e a)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>dynamic_weakly_step_consistent_def</span><span> </span><span>dynamic_weakly_step_consistent_e_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>dynamic_local_respect</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_local_respect &#8801; &#8704;a d s. reachable0 s &#8743; &#172;((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; d &#8764; (step s a)) &quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>dynamic_local_respect_e</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#39;e &#8658; bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_local_respect_e a &#8801; &#8704;d s. reachable0 s &#8743; &#172;((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; d &#8764; (step s a))&quot;</span></span></span><span>
</span><span>        
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>dynamic_local_respect_all_evt</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_local_respect = (&#8704;a. dynamic_local_respect_e a)&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect_def</span><span> </span><span>dynamic_local_respect_e_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">declare</span></span><span> </span><span>dynamic_step_consistent_def</span><span> </span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>dynamic_weakly_step_consistent_def</span><span> </span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> 
</span><span>       </span><span>dynamic_local_respect_def</span><span> </span><span class="delimiter">[</span><span>cong</span><span class="delimiter">]</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>step_cons_impl_weak</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_step_consistent &#10233; dynamic_weakly_step_consistent&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>dynamic_step_consistent_def</span><span> </span><span>dynamic_weakly_step_consistent_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>lemma_local</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bool&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">where</span></span><span>
</span><span>        </span><span class="string"><span class="delete"><span class="delete">&quot;lemma_local &#8801; &#8704;s a as u. the (domain a) &#8713; sources (a # as) u s &#10230; (s &#8776; (sources (a # as) u s)  &#8776; (step s a))&quot;</span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>weak_with_step_cons</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">assumes</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span>dynamic_weakly_step_consistent</span><span>
</span><span>        </span><span class="keyword2"><span class="keyword">and</span></span><span>   </span><span>p2</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect</span><span>
</span><span>      </span><span class="keyword2"><span class="keyword">shows</span></span><span>   </span><span>dynamic_step_consistent</span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>      </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>d</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743; 
               (((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; (the (domain a)) &#8764; t))
               &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8764; d &#8764; t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; (the (domain a)) &#8764; t))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((the (domain a)) @ s &#8605; d)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((the (domain a)) @ s &#8605; d)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8764; (the (domain a)) &#8764; t)&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>a3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a1</span><span> </span><span>a2</span><span> </span><span>b0</span><span> </span><span>b1</span><span> </span><span>p1</span><span> </span><span>dynamic_weakly_step_consistent_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#172;((the (domain a)) @ s &#8605; d)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#172;((the (domain a)) @ t &#8605; d)&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a1</span><span> </span><span>a2</span><span> </span><span>b0</span><span> </span><span>policy_respect</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; d &#8764; (step s a)&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>p2</span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;t &#8764; d &#8764; (step t a)&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>p2</span><span> </span><span>a1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>  
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b2</span><span> </span><span>b3</span><span> </span><span>a2</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span>vpeq_transitive_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Lemmas for the inference framework &#8250;</span></span></span><span>
</span><span>  
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sources_refl</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#10233; u &#8712; sources as u s&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span> </span><span>arbitrary</span><span class="delimiter">:</span><span> </span><span>s</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>sources_Nil</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>sources_Cons</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>enabled</span><span> </span><span>reachableStep</span><span>  
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>     
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_1_sub_1</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s ;
                       dynamic_local_respect;
                       the (domain a) &#8713; sources (a # as) u s;
                       (s &#8776; (sources (a # as) u s) &#8776; t)&#10215;
                      &#10233; (s &#8776; (sources as u (step s a)) &#8776; (step s a))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>dynamic_local_respect_def</span><span> </span><span>sources_Cons</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_1_sub_2</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s ;
                       reachable0 t ;
                       dynamic_local_respect;
                       the (domain a) &#8713; sources (a # as) u s; 
                       (s &#8776; (sources (a # as) u s) &#8776; t)&#10215;       
                      &#10233; (t &#8776; (sources as u (step s a)) &#8776; (step t a))&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span> 
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect</span><span>
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain a) &#8713; sources (a # as) u s&quot;</span></span></span><span>
</span><span>          </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (a # as) u s) &#8776; t)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources as u (step s a) &#10230; &#172;interferes (the (domain a)) s v&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a6</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (a # as) u s = sources as u (step s a)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a6</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources as u (step s a) &#10230; (s &#8764; v &#8764; t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a7</span><span> </span><span>b2</span><span> </span><span>ivpeq_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources as u (step s a) &#10230; &#172;interferes (the (domain a)) t v&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>a2</span><span> </span><span>policy_respect</span><span> </span><span>b1</span><span> </span><span>b3</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>          </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources as u (step s a) &#10230; (t &#8764; v &#8764; (step t a))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a2</span><span> </span><span>a3</span><span> </span><span>b4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ivpeq_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_1_sub_3</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;
                       the (domain a) &#8713; sources (a # as) u s;
                       (s &#8776; (sources (a # as) u s) &#8776; t)&#10215;     
                      &#10233; (s &#8776; (sources as u (step s a)) &#8776; t)&quot;</span></span></span><span>
</span><span>         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>sources_Cons</span><span class="delimiter">)</span><span>
</span><span>         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>sources_Cons</span><span class="delimiter">)</span><span>
</span><span>         </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_1_sub_4</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;(s &#8776; (sources as u (step s a)) &#8776; t);
                             (s &#8776; (sources as u (step s a)) &#8776; (step s a));
                             (t &#8776; (sources as u (step s a)) &#8776; (step t a)) &#10215;
                      &#10233; ((step s a) &#8776;(sources as u (step s a)) &#8776; (step t a))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>meson</span><span> </span><span>ivpeq_def</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span>vpeq_transitive_lemma</span><span class="delimiter">)</span><span>
</span><span>           
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_1</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s;
                      reachable0 t;
                      dynamic_step_consistent;
                      dynamic_local_respect;
                      (s &#8776; (sources (a # as) u s) &#8776; t)&#10215;
                      &#10233; ((step s a) &#8776; (sources as u (step s a)) &#8776; (step t a))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain a)&#8712;sources (a # as) u s&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>dynamic_step_consistent_def</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>sources_Cons</span><span class="delimiter">)</span><span>                                                        
</span><span>         </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>           </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect</span><span>
</span><span>           </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain a) &#8713; sources (a # as) u s&quot;</span></span></span><span>
</span><span>           </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (a # as) u s) &#8776; t)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>           </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>
</span><span>           </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a6</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources as u (step s a)) &#8776; t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>policy_respect</span><span> </span><span>a4</span><span> </span><span>a5</span><span> </span><span>lemma_1_sub_3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>           </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources as u (step s a)) &#8776; (step s a))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>a1</span><span> </span><span>policy_respect</span><span> </span><span>a4</span><span> </span><span>a5</span><span> </span><span>lemma_1_sub_1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>           </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a8</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(t &#8776; (sources as u (step s a)) &#8776; (step t a))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>b0</span><span> </span><span>a1</span><span> </span><span>policy_respect</span><span> </span><span>a4</span><span> </span><span>a5</span><span> </span><span>lemma_1_sub_2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>           </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot; ((step s a) &#8776;(sources as u (step s a)) &#8776; (step t a))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a6</span><span> </span><span>a7</span><span> </span><span>lemma_1_sub_4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>         </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>lemma_2</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s;
                      dynamic_local_respect;
                      the (domain a) &#8713; sources (a # as) u s&#10215;
                      &#10233; (s &#8776; (sources as u (step s a)) &#8776; (step s a))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>dynamic_local_respect_def</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>sources_Cons</span><span class="delimiter">)</span><span>
</span><span>       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>     </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sources_eq1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t as u. reachable0 s &#8743;
                    reachable0 t &#8743;
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; (sources as u s) = (sources as u t)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>       </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>as</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u. reachable0 s &#8743;
                    reachable0 t &#8743;                     
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; (sources as u s) = (sources as u t)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>sources_Nil</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>b</span><span> </span><span>bs</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u.((reachable0 s) 
                                &#8743; (reachable0 t) 
                                &#8743; dynamic_step_consistent 
                                &#8743; dynamic_local_respect 
                                &#8743; (s &#8776; (sources bs u s) &#8776; t)) &#10230;
                                  (sources bs u s) = (sources bs u t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>              </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>s</span><span> </span><span>t</span><span> </span><span>u</span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span>dynamic_step_consistent</span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_local_respect&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p9</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (b # bs) u s) &#8776; t)&quot;</span></span></span><span> 
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs u (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lemma_1</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>policy_respect</span><span> </span><span>p5</span><span> </span><span>p9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u s = sources (b # bs) u t&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; (sources (b # bs) u s)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; (sources (b # bs) u s)&quot;</span></span></span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; (the(domain b)) &#8764; t&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>p9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;interferes (the (domain b)) s u = interferes (the (domain b)) t u &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>policy_respect</span><span> </span><span>p9</span><span> </span><span>sources_refl</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(sources bs u (step s b)) = (sources bs u (step t b))&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a2</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p5</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b) 
                          &#10230; interferes (the (domain b)) s v = interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>ivpeq_def</span><span> </span><span>policy_respect</span><span> </span><span>p9</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u s = sources (b # bs) u t&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b4</span><span> </span><span>b5</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                   </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; (sources (b # bs) u s)&quot;</span></span></span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u s = sources bs u (step s b)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(sources bs u (step s b)) = (sources bs u (step t b))&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a2</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p5</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b)&#10230;&#172; interferes (the (domain b)) s v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b)&#10230;&#172; interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>b3</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p9</span><span> </span><span>policy_respect</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step t b)&#10230;&#172; interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>b2</span><span> </span><span>b4</span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; (sources (b # bs) u t)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>b2</span><span> </span><span>b5</span><span> </span><span>sources.simps</span><span class="delimiter">(</span><span>2</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u t = sources bs u (step t b)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b6</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                       </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>b1</span><span> </span><span>b2</span><span class="delimiter">)</span><span>
</span><span>                   </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>       </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>       </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>ipurge_eq</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t as u. reachable0 s &#8743;
                    reachable0 t &#8743;
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; (ipurge as u s) = (ipurge as u t)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>                                               
</span><span>       </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>as</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u. reachable0 s &#8743;
                    reachable0 t &#8743;
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; (ipurge as u s) = (ipurge as u t)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>                                         
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>sources_Nil</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>b</span><span> </span><span>bs</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u.((reachable0 s) 
                                &#8743; (reachable0 t) 
                                &#8743; dynamic_step_consistent 
                                &#8743; dynamic_local_respect 
                                &#8743; (s &#8776; (sources bs u s) &#8776; t))
                                &#10230; (ipurge bs u s) = (ipurge bs u t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>              </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>s</span><span> </span><span>t</span><span> </span><span>u</span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span>dynamic_step_consistent</span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_local_respect&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p9</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (b # bs) u s) &#8776; t)&quot;</span></span></span><span>
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs u (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lemma_1</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p5</span><span> </span><span>p9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(ipurge bs u (step s b)) = (ipurge bs u (step t b))&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p5</span><span> </span><span>p9</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u s = sources (b # bs) u t&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p5</span><span> </span><span>p9</span><span> </span><span>sources_eq1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                 </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) u s = ipurge (b # bs) u t&quot;</span></span></span><span>
</span><span>                   </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; (sources (b # bs) u s)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>                     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; (sources (b # bs) u s)&quot;</span></span></span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; (the(domain b)) &#8764; t&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>p9</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; (sources (b # bs) u t)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a3</span><span> </span><span>b0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a2</span><span> </span><span>b0</span><span> </span><span>ipurge_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                   </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; (sources (b # bs) u s)&quot;</span></span></span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources (b # bs) u s = sources bs u (step s b)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b)&#10230;&#172; interferes (the (domain b)) s v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b)&#10230;&#172; interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>b3</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p9</span><span> </span><span>policy_respect</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; (sources (b # bs) u t)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a3</span><span> </span><span>b1</span><span> </span><span>b4</span><span> </span><span>interf_reflexive</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) u s = ipurge bs u (step s b)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) u t = ipurge bs u (step t b)&quot;</span></span></span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b5</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b6</span><span> </span><span>b7</span><span> </span><span>a2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>                   </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>       </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>non_influgence_lemma</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t as u. reachable0 s &#8743;
                    reachable0 t &#8743;
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; ((s &#8882; as &#8773; t &#8882; (ipurge as u t) @ u))&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>      </span><span class="keyword1"><span class="command">{</span></span><span> 
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>as</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u. reachable0 s &#8743;
                    reachable0 t &#8743;
                    dynamic_step_consistent &#8743;
                    dynamic_local_respect &#8743;
                    (s &#8776; (sources as u s) &#8776; t)
                    &#10230; ((s &#8882; as &#8773; t &#8882; (ipurge as u t) @ u))&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>b</span><span> </span><span>bs</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t u.((reachable0 s) 
                                &#8743; (reachable0 t) 
                                &#8743; dynamic_step_consistent 
                                &#8743; dynamic_local_respect 
                                &#8743; (s &#8776; (sources bs u s) &#8776; t)) &#10230;
                                  ((s &#8882; bs &#8773; t &#8882; (ipurge bs u t) @ u))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>              </span><span class="keyword1"><span class="command">{</span></span><span> 
</span><span>                </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>s</span><span> </span><span>t</span><span> </span><span>u</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span>dynamic_step_consistent</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p4</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p8</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (b # bs) u s) &#8776; t)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs u (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lemma_1</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; b # bs &#8773; t &#8882; ipurge (b # bs) u t @ u&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; sources (b # bs) u s&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; sources (b # bs) u s&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;interferes (the (domain b)) s u = interferes (the (domain b)) t u &quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>policy_respect</span><span> </span><span>p8</span><span> </span><span>sources_refl</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs u (step s b) 
                          &#10230; interferes (the (domain b)) s v = interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>ivpeq_def</span><span> </span><span>policy_respect</span><span> </span><span>p8</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) u t = b # (ipurge bs u (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>b0</span><span> </span><span>ipurge_Cons</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span>sources_eq1</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; (step t b) &#8882; (ipurge bs u (step t b)) @ u))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b3</span><span> </span><span>b4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; sources (b # bs) u s&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) u t = (ipurge bs u (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>a1</span><span> </span><span>b0</span><span> </span><span>ipurge_Cons</span><span> </span><span>ipurge_eq</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span>reachableStep</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources bs u (step s b)) &#8776; (step s b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>lemma_2</span><span> </span><span>p1</span><span> </span><span>p4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources bs u (step s b)) &#8776; t)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>lemma_1_sub_3</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs u (step s b)) &#8776; t)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>meson</span><span> </span><span>b3</span><span> </span><span>b2</span><span> </span><span>ivpeq_def</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span>vpeq_transitive_lemma</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; t &#8882; (ipurge bs u t) @ u))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b4</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(t &#8776; (sources bs u (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>b0</span><span> </span><span>lemma_1_sub_2</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge bs u t = ipurge bs u (step t b)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>a1</span><span> </span><span>b4</span><span> </span><span>ipurge_eq</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b8</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; t &#8882; (ipurge bs u (step t b)) @ u))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b5</span><span> </span><span>b7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>observ_equivalence_def</span><span> </span><span>run_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>       </span><span class="keyword1"><span class="command">qed</span></span><span> 
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249; Interference framework of information flow security properties &#8250;</span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>nonintf_impl_weak</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference &#10233; weak_noninterference&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>noninterference_def</span><span> </span><span>observ_equiv_sym</span><span> </span><span>observ_equiv_trans</span><span> </span><span>reachable_s0</span><span> </span><span>weak_noninterference_def</span><span class="delimiter">)</span><span>       
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>wk_nonintf_r_impl_wk_nonintf</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninterference_r &#10233; weak_noninterference&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>reachable_s0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>  
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>nonintf_r_impl_noninterf</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference_r &#10233; noninterference&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>noninterference_def</span><span> </span><span>noninterference_r_def</span><span> </span><span>reachable_s0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span> 
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>nonintf_r_impl_wk_nonintf_r</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference_r &#10233; weak_noninterference_r&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>noninterference_r_def</span><span> </span><span>observ_equiv_sym</span><span> </span><span>observ_equiv_trans</span><span> </span><span>weak_noninterference_r_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>noninf_impl_nonintf_r</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#10233; noninterference_r&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ivpeq_def</span><span> </span><span>noninfluence_def</span><span> </span><span>noninterference_r_def</span><span> </span><span>vpeq_reflexive_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>      
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>noninf_impl_nonlk</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#10233; nonleakage&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>noninterference_r_def</span><span> </span><span>nonleakage_def</span><span> </span><span>observ_equiv_sym</span><span> 
</span><span>      </span><span>observ_equiv_trans</span><span> </span><span>noninfluence_def</span><span> </span><span>noninf_impl_nonintf_r</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> 
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>wk_noninfl_impl_nonlk</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninfluence &#10233; nonleakage&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weak_noninfluence_def</span><span> </span><span>nonleakage_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>       
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>wk_noninfl_impl_wk_nonintf_r</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninfluence &#10233; weak_noninterference_r&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>ivpeq_def</span><span> </span><span>weak_noninfluence_def</span><span> </span><span>vpeq_reflexive_lemma</span><span> </span><span>weak_noninterference_r_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> 
</span><span>  
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sources_step2</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s; (the (domain a))@s &#8605; d&#10215; &#10233; sources [a] d s = {the (domain a),d}&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>auto</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>sources_Cons</span><span> </span><span>sources_Nil</span><span> </span><span>enabled</span><span> </span><span>dest</span><span class="delimiter">:</span><span> </span><span>enabled</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>exec_equiv_both</span><span class="delimiter">:</span><span>
</span><span>     </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 C1; reachable0 C2;(step C1 a) &#8882; as &#8773; (step C2 b) &#8882; bs @ u&#10215; 
      &#10233; (C1 &#8882; (a # as) &#8773; C2 &#8882; (b # bs) @ u)&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sources_unwinding_step</span><span class="delimiter">:</span><span>
</span><span>      </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;reachable0 s; reachable0 t;s &#8776;(sources (a#as) d s)&#8776; t; dynamic_step_consistent&#10215;  
        &#10233; ((step s a) &#8776;(sources as d (step s a))&#8776; (step t a))&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarsimp</span><span> </span><span>simp</span><span class="delimiter">:</span><span> </span><span>ivpeq_def</span><span> </span><span>sources_Cons</span><span class="delimiter">)</span><span>        
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>UnionI</span><span> </span><span>dynamic_step_consistent_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>nonlk_imp_sc</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;nonleakage &#10233; dynamic_step_consistent&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;nonleakage&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;as d s t. reachable0 s &#8743; reachable0 t
                  &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>nonleakage_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>           
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a d s t. reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743; 
                 (((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; (the (domain a)) &#8764; t))
                 &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>d</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743; 
                 (((the (domain a)) @ s &#8605; d) &#10230; (s &#8764; (the (domain a)) &#8764; t))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8776; (sources [] d s) &#8776; t&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; [] &#8773; t &#8882; [] @ d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a4</span><span> </span><span>a0</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(the (domain a))@s &#8605; d&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>              </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(the (domain a))@s &#8605; d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources [a] d s = {d, (the(domain a))}&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>c0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8764; (the (domain a)) &#8764; t)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8776; (sources [a] d s) &#8776; t&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>a0</span><span> </span><span>c0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; [a] &#8773; t &#8882; [a] @ d)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b2</span><span> </span><span>a0</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>              </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#172;((the (domain a))@s &#8605; d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources [a] d s = {d}&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>sources_Cons</span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources [a] d s) &#8776; t)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; [a] &#8773; t &#8882; [a] @ d)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b2</span><span> </span><span>a0</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> 
</span><span>            </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sc_imp_nonlk</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_step_consistent &#10233; nonleakage&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_step_consistent&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a d s t. reachable0 s &#8743; reachable0 t &#8743; (s &#8764; d &#8764; t) &#8743;
               (s &#8764; (the (domain a)) &#8764; t) &#10230; ((step s a) &#8764; d &#8764; (step t a))&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>dynamic_step_consistent_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;as d s t. reachable0 s &#8743; reachable0 t
                  &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>as</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d s t. reachable0 s &#8743; reachable0 t
                  &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>
</span><span>                </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sources_refl</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>              </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>b</span><span> </span><span>bs</span><span class="delimiter">)</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d s t. reachable0 s &#8743; reachable0 t
                  &#8743; (s &#8776; (sources bs d s) &#8776; t) &#10230; (s &#8882; bs &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>d</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (b#bs) d s) &#8776; t)&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776;(sources bs d (step s b))&#8776; (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>b1</span><span> </span><span>p0</span><span> </span><span>sources_unwinding_step</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(step s b) &#8882; bs &#8773; (step t b) &#8882; bs @ d&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Cons.hyps</span><span> </span><span>b0</span><span> </span><span>b2</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; b # bs &#8773; t &#8882; b # bs @ d&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>sc_eq_nonlk</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;dynamic_step_consistent = nonleakage&quot;</span></span></span><span> 
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nonlk_imp_sc</span><span> </span><span>sc_imp_nonlk</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>noninf_imp_dlr</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#10233; dynamic_local_respect&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; d as s t. reachable0 s &#8743; reachable0 t
                  &#8743; (s &#8776; (sources as d s) &#8776; t)
                  &#10230; (s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>noninfluence_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;a d s. reachable0 s &#8743; &#172;((the (domain a)) @ s &#8605; d) 
                    &#10230; (s &#8764; d &#8764; (step s a)) &quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>a</span><span> </span><span>d</span><span> </span><span>s</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; &#172;((the (domain a)) @ s &#8605; d)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sources [a] d s = {d}&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>sources_Cons</span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(ipurge [a] d s) = []&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a1</span><span> </span><span>interf_reflexive</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8764; d &#8764; s&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>vpeq_reflexive_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources [a] d s) &#8776; s)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>a3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; [a] &#8773; s &#8882; (ipurge [a] d s) @ d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a4</span><span> </span><span>a0</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; [a] &#8773; s &#8882; [] @ d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a5</span><span> </span><span>a2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8764; d &#8764; (step s a))&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a6</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>noninf_imp_sc</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#10233; dynamic_step_consistent&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nonlk_imp_sc</span><span> </span><span>noninf_impl_nonlk</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>  
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>UnwindingTheorem</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;dynamic_step_consistent;
                            dynamic_local_respect&#10215; 
                            &#10233; noninfluence&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span>dynamic_step_consistent</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p4</span><span class="delimiter">:</span><span> </span><span>dynamic_local_respect</span><span>
</span><span>        </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>as</span><span> </span><span>d</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t. reachable0 s &#8743;
                  reachable0 t &#8743;
                  (s &#8776; (sources as d s) &#8776; t)
                  &#10230; ((s &#8882; as &#8773; t &#8882; (ipurge as d  t) @ d))&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span>induct</span><span> </span><span>as</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span>Nil</span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>sources_Nil</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>          </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">case</span></span><span> </span><span class="delimiter">(</span><span>Cons</span><span> </span><span>b</span><span> </span><span>bs</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;s t. reachable0 s &#8743;
                  reachable0 t &#8743;
                  (s &#8776; (sources bs d s) &#8776; t)
                  &#10230; ((s &#8882; bs &#8773; t &#8882; (ipurge bs d  t) @ d))&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?case</span><span>
</span><span>              </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>              </span><span class="keyword1"><span class="command">{</span></span><span> 
</span><span>                </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s&quot;</span></span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 t&quot;</span></span></span><span>
</span><span>                </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p8</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources (b # bs) d s) &#8776; t)&quot;</span></span></span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs d (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>lemma_1</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; b # bs &#8773; t &#8882; ipurge (b # bs) d t @ d&quot;</span></span></span><span>
</span><span>                  </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span class="delimiter">(</span><span>cases</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; sources (b # bs) d s&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8712; sources (b # bs) d s&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;interferes (the (domain b)) s d = interferes (the (domain b)) t d &quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>policy_respect</span><span> </span><span>p8</span><span> </span><span>sources_refl</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;v. v&#8712;sources bs d (step s b) 
                          &#10230; interferes (the (domain b)) s v = interferes (the (domain b)) t v &quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>ivpeq_def</span><span> </span><span>policy_respect</span><span> </span><span>p8</span><span> </span><span>sources_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fastforce</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) d t = b # (ipurge bs d (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>b0</span><span> </span><span>ipurge_Cons</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span>sources_eq1</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; (step t b) &#8882; (ipurge bs d (step t b)) @ d))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a1</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b3</span><span> </span><span>b4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">next</span></span><span>
</span><span>                    </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>b0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;the (domain b) &#8713; sources (b # bs) d s&quot;</span></span></span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge (b # bs) d t = (ipurge bs d (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>a1</span><span> </span><span>b0</span><span> </span><span>ipurge_Cons</span><span> </span><span>ipurge_eq</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span>reachableStep</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources bs d (step s b)) &#8776; (step s b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>lemma_2</span><span> </span><span>p1</span><span> </span><span>p4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b3</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8776; (sources bs d (step s b)) &#8776; t)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b0</span><span> </span><span>lemma_1_sub_3</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;((step s b) &#8776; (sources bs d (step s b)) &#8776; t)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>meson</span><span> </span><span>b3</span><span> </span><span>b2</span><span> </span><span>ivpeq_def</span><span> </span><span>vpeq_symmetric_lemma</span><span> </span><span>vpeq_transitive_lemma</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; t &#8882; (ipurge bs d t) @ d))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b4</span><span> </span><span>p0</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(t &#8776; (sources bs d (step s b)) &#8776; (step t b))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>b0</span><span> </span><span>lemma_1_sub_2</span><span> </span><span>p4</span><span> </span><span>p8</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge bs d t = ipurge bs d (step t b)&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>a1</span><span> </span><span>b4</span><span> </span><span>ipurge_eq</span><span> </span><span>p1</span><span> </span><span>p2</span><span> </span><span>p3</span><span> </span><span>p4</span><span> </span><span>reachableStep</span><span class="delimiter">)</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b8</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(((step s b) &#8882; bs &#8773; t &#8882; (ipurge bs d (step t b)) @ d))&quot;</span></span></span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b5</span><span> </span><span>b7</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                    </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span>
</span><span>                      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b1</span><span> </span><span>observ_equivalence_def</span><span> </span><span>run_Cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>                  </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>              </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>noninfluence_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>UnwindingTheorem1</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;dynamic_weakly_step_consistent;
                            dynamic_local_respect&#10215;  &#10233; noninfluence&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>UnwindingTheorem</span><span> </span><span>weak_with_step_cons</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>                  
</span><span>   </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>uc_eq_noninf</span><span> </span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(dynamic_step_consistent &#8743; dynamic_local_respect) = noninfluence&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>UnwindingTheorem1</span><span> </span><span>step_cons_impl_weak</span><span> </span><span>noninf_imp_dlr</span><span> </span><span>noninf_imp_sc</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>   </span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
     dipurge_eq required
   *)</span></span></span></span></span><span>
</span><span>
</span><span>   </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>noninf_impl_weak</span><span class="delimiter">:</span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence &#10233; weak_noninfluence&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>     </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninfluence&quot;</span></span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; d as s t. reachable0 s &#8743; reachable0 t
               &#8743; (s &#8776; (sources as d s) &#8776; t)  
               &#10230; (s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>noninfluence_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(dynamic_step_consistent &#8743; dynamic_local_respect)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>uc_eq_noninf</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>     </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; d as bs s t . reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
               &#8743; ipurge as d t = ipurge bs d t
               &#10230; (s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>       </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>       </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>         </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>d</span><span> </span><span>as</span><span> </span><span>bs</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>         </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
               &#8743; ipurge as d t = ipurge bs d t&quot;</span></span></span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference_r&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>noninf_impl_nonintf_r</span><span> </span><span>p0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninterference_r&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a4</span><span> </span><span>nonintf_r_impl_wk_nonintf_r</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>  
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ipurge as d s = ipurge as d t&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p2</span><span> </span><span>ipurge_eq</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b4</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>noninf_imp_sc</span><span> </span><span>nonleakage_def</span><span> </span><span>p0</span><span> </span><span>sc_imp_nonlk</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b5</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(t &#8882; bs &#8773; t &#8882; (ipurge bs d t) @ d)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a4</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b6</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(t &#8882; bs &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>b5</span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>         </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>b7</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>           </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>b1</span><span> </span><span>b6</span><span> </span><span>observ_equiv_sym</span><span> </span><span>observ_equiv_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>         </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>         </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>       </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>     </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>   </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>wk_nonintf_r_and_nonlk_impl_noninfl</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;weak_noninterference_r; nonleakage&#10215; &#10233; weak_noninfluence&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;weak_noninterference_r&quot;</span></span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;nonleakage&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d as bs s. reachable0 s &#8743; ipurge as d s = ipurge bs d s
                              &#10230; (s &#8882; as &#8773; s &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>weak_noninterference_r_def</span><span> </span><span>p0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d as s t. reachable0 s &#8743; reachable0 t
                          &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nonleakage_def</span><span> </span><span>p1</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; d as bs s t . reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
                              &#8743; ipurge as d t = ipurge bs d t
                              &#10230; (s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>d</span><span> </span><span>as</span><span> </span><span>bs</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t &#8743; (s &#8776; (sources as d s) &#8776; t) 
                              &#8743; ipurge as d t = ipurge bs d t&quot;</span></span></span><span>  
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; as &#8773; t &#8882; as @ d&quot;</span></span></span><span> 
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p3</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;t &#8882; as &#8773; t &#8882; bs @ d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s &#8882; as &#8773; t &#8882; bs @ d)&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a1</span><span> </span><span>a2</span><span> </span><span>observ_equiv_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>          </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>nonintf_r_and_nonlk_impl_noninfl</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#10214;noninterference_r; nonleakage&#10215; &#10233; noninfluence&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;noninterference_r&quot;</span></span></span><span>
</span><span>        </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>p1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;nonleakage&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot; &#8704;d as s. reachable0 s &#10230; (s &#8882; as &#8773; s &#8882; (ipurge as d s) @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p0</span><span> </span><span>noninterference_r_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>p3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;d as s t. reachable0 s &#8743; reachable0 t
                          &#8743; (s &#8776; (sources as d s) &#8776; t) &#10230; (s &#8882; as &#8773; t &#8882; as @ d)&quot;</span></span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p1</span><span> </span><span>nonleakage_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704; d as s t. reachable0 s &#8743; reachable0 t
                          &#8743; (s &#8776; (sources as d s) &#8776; t)
                          &#10230; (s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d)&quot;</span></span></span><span>
</span><span>        </span><span class="keyword1"><span class="command">proof</span></span><span> </span><span>-</span><span>
</span><span>          </span><span class="keyword1"><span class="command">{</span></span><span>
</span><span>            </span><span class="keyword3"><span class="command">fix</span></span><span> </span><span>d</span><span> </span><span>as</span><span> </span><span>bs</span><span> </span><span>s</span><span> </span><span>t</span><span>
</span><span>            </span><span class="keyword3"><span class="command">assume</span></span><span> </span><span>a0</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;reachable0 s &#8743; reachable0 t
                          &#8743; (s &#8776; (sources as d s) &#8776; t)&quot;</span></span></span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a1</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; as &#8773; t &#8882; as @ d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>p3</span><span> </span><span>a0</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a2</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; as &#8773; s &#8882; (ipurge as d s) @ d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span>a3</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;t &#8882; as &#8773; t &#8882; (ipurge as d t) @ d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>p2</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>            </span><span class="keyword1"><span class="command">have</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s &#8882; as &#8773; t &#8882; (ipurge as d t) @ d&quot;</span></span></span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>a0</span><span> </span><span>a1</span><span> </span><span>a3</span><span> </span><span>observ_equiv_trans</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>            </span><span class="keyword1"><span class="command">}</span></span><span>
</span><span>          </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>        </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">then</span></span><span> </span><span class="keyword3"><span class="command">show</span></span><span> </span><span class="var">?thesis</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>noninfluence_def</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">qed</span></span><span>
</span><span>
</span><span>    </span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span>nonintf_r_and_nonlk_eq_strnoninfl</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(noninterference_r &#8743; nonleakage) = noninfluence&quot;</span></span></span><span>
</span><span>      </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>nonintf_r_and_nonlk_impl_noninfl</span><span> </span><span>noninf_impl_nonintf_r</span><span> </span><span>noninf_impl_nonlk</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>blast</span><span> 
</span><span>
</span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span></pre>

</div>
</body>
</html>
