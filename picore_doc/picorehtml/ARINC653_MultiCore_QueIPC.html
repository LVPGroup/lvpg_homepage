<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory ARINC653_MultiCore_QueIPC (Isabelle2017: October 2017)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory ARINC653_MultiCore_QueIPC</h1>

<span class="command">theory</span> <span class="name">ARINC653_MultiCore_QueIPC</span><br/>
<span class="keyword">imports</span> <a href="PiCore_Syntax.html"><span class="name">PiCore_Syntax</span></a> <a href="PiCore_RG_Invariant.html"><span class="name">PiCore_RG_Invariant</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment">(*
Created by Yongwang Zhao (zhaoyongwang@gmail.com, zhaoyw@buaa.edu.cn)
School of Computer Science &amp; Engineering, Beihang University, China
*)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Formal Specification and Reasoning of ARINC653 Multicore Microkernel&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theory</span></span><span class=""> </span><span class="">ARINC653_MultiCore_QueIPC</span><span class="">
</span><span class="keyword2"><span class="keyword">imports</span></span><span class=""> </span><span class="">PiCore_Syntax</span><span class=""> </span><span class="">PiCore_RG_Invariant</span><span class="">
</span><span class="keyword2"><span class="keyword">begin</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;functional specification&#8250;</span><span class="">
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">Part</span><span class="">
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">Sched</span><span class="">
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">Message</span><span class=""> 
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">Port</span><span class="">
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">Core</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">typedecl</span></span><span class=""> </span><span class="">QChannel</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">record</span></span><span class=""> </span><span class="">Config</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">c2s</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Sched&quot;</span><span class="">
</span><span class="">                </span><span class="">p2s</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Part &#8658; Sched&quot;</span><span class="">
</span><span class="">                </span><span class="">p2p</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Port &#8658; Part&quot;</span><span class="">
</span><span class="">                </span><span class="">chsrc</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;QChannel &#8658; Port&quot;</span><span class="">
</span><span class="">                </span><span class="">chdest</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;QChannel &#8658; Port&quot;</span><span class="">  
</span><span class="">                </span><span class="">chmax</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;QChannel &#8658; nat&quot;</span><span class="">
</span><span class="">  
</span><span class="keyword1"><span class="command">axiomatization</span></span><span class=""> </span><span class="">conf</span><span class="delimiter">::</span><span class="">Config</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">bij_c2s</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;bij (c2s conf)&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">portsrc_disj</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;c1 c2. c1 &#8800; c2 &#10230; (chsrc conf) c1 &#8800; (chsrc conf) c2&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">portdest_disj</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;c1 c2. c1 &#8800; c2 &#10230; (chdest conf) c1 &#8800; (chdest conf) c2&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">portsrcdest_disj</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;c1 c2. (chsrc conf) c1 &#8800; (chdest conf) c2&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">inj_surj_c2s</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;inj (c2s conf) &#8743; surj (c2s conf)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">bij_c2s</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">bij_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="comment">(*
definition gsch :: &quot;Config &#8658; Core &#8658; Sched&quot;
  where &quot;gsch cfg k &#8801; (c2s cfg) k&quot;
*)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">is_src_qport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;is_src_qport sc p &#8801; (p&#8712;range (chsrc sc))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">is_dest_qport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;is_dest_qport sc p &#8801; (p&#8712;range (chdest sc))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">port_of_part</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; Part &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;port_of_part sc po pa &#8801; ((p2p sc) po = pa)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">ch_srcqport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; QChannel&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;ch_srcqport sc p &#8801; SOME c. (chsrc sc) c = p&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">PartMode</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">IDLE</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">READY</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">RUN</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">record</span></span><span class=""> </span><span class="">State</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">cur</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Sched &#8658; Part option&quot;</span><span class="">
</span><span class="">               </span><span class="">qbuf</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;QChannel &#8658; Message list&quot;</span><span class="">
</span><span class="">               </span><span class="">qbufsize</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;QChannel &#8658; nat&quot;</span><span class="">
</span><span class="">               </span><span class="">partst</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Part &#8658; PartMode&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">EL</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Core_InitE</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">ScheduleE</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Send_Que_MessageE</span><span class=""> </span><span class="delimiter">|</span><span class="">  </span><span class="">Recv_Que_MessageE</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">parameter</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Port</span><span class=""> </span><span class="">Port</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Message</span><span class=""> </span><span class="">Message</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Partition</span><span class=""> </span><span class="">Part</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">type_synonym</span></span><span class=""> </span><span class="">EventLabel</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;EL &#215; (parameter list &#215; Core)&quot;</span><span class=""> 
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">get_evt_label</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;EL &#8658; parameter list &#8658; Core &#8658; EventLabel&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ _ @ _&quot;</span><span class=""> </span><span class="delimiter">[</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">]</span><span class=""> </span><span class="">20</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;get_evt_label el ps k &#8801; (el,(ps,k))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Core_Init</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Core_Init k&#8801; 
    EVENT Core_InitE [] @ k 
    THEN 
      &#180;partst := (&#955;p. if p2s conf p = c2s conf k &#8743; &#180;partst p = IDLE 
                      then READY else &#180;partst p)
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">System_Init</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; (State &#215; (EventLabel, Core, State) x)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;System_Init cfg &#8801; (&#10631;cur=(&#955;c. None ),
                            qbuf = (&#955;c. []),
                            qbufsize = (&#955;c. 0),
                            partst = (&#955;p. IDLE)&#10632;, 
                            (&#955;k. Core_Init k))&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Schedule</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Part &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Schedule k p &#8801; 
    EVENT ScheduleE [Partition p] @ k 
    WHEN
      p2s conf p = c2s conf k
      &#8743; (&#180;partst p &#8800; IDLE)
      &#8743; (&#180;cur((c2s conf) k) = None 
          &#8744; p2s conf (the (&#180;cur((c2s conf) k))) = c2s conf k)
    THEN 
      IF (&#180;cur((c2s conf) k) &#8800; None) THEN 
        ATOMIC
          &#180;partst := &#180;partst(the (&#180;cur ((c2s conf) k)) := READY);;
          &#180;cur := &#180;cur((c2s conf) k := None)
        END
      ELSE SKIP FI;;
      
      ATOMIC
        &#180;cur := &#180;cur((c2s conf) k := Some p);;
        &#180;partst := &#180;partst(p := RUN)
      END

    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Send_Que_Message</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Send_Que_Message k p m &#8801; 
    EVENT Send_Que_MessageE [Port p, Message m] @ k 
    WHEN
      is_src_qport conf p
      &#8743; &#180;cur ((c2s conf) k) &#8800; None
      &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))
    THEN
      AWAIT &#180;qbufsize (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p) THEN 
        &#180;qbuf := &#180;qbuf (ch_srcqport conf p := &#180;qbuf (ch_srcqport conf p) @ [m]);;
        &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) + 1)
      END
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Recv_Que_Message</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Recv_Que_Message k p &#8801; 
    EVENT Recv_Que_MessageE [Port p] @ k 
    WHEN
      is_dest_qport conf p 
      &#8743; &#180;cur ((c2s conf) k) &#8800; None
      &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))
    THEN 
      AWAIT &#180;qbufsize (ch_srcqport conf p) &gt; 0 THEN 
        &#180;qbuf := &#180;qbuf (ch_srcqport conf p := tl (&#180;qbuf (ch_srcqport conf p)));;
        &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) - 1)
      END
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Rely-guarantee condition of events&#8250;</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Core_Init_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Core_Init_RGCond k &#8801; 
          RG[&#10627;&#8704;p. p2s conf p = c2s conf k &#10230; &#180;partst p = IDLE&#10628;,
          &#10627;(&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst  p = &#186;partst p)&#10628;,
          (&#10627;&#170;cur= &#186;cur &#8743; &#170;qbuf= &#186;qbuf &#8743; &#170;qbufsize= &#186;qbufsize 
            &#8743; (&#8704;p. p2s conf p = c2s conf k &#10230; &#186;partst p = IDLE &#8743; &#170;partst p = READY)
            &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p)&#10628; &#8746; Id),
          &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Schedule_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Part &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Schedule_RGCond k p &#8801; 
   (RG[&#10627;True&#10628;,
       &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k) &#8743;
        (&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst  p = &#186;partst p)&#10628;, 
       (&#10627;(&#170;cur = &#186;cur(c2s conf k := Some p) 
          &#8743; &#170;partst = &#186;partst(the (&#170;cur(c2s conf k)) := RUN) 
          &#8743; p2s conf p = c2s conf k
             &#8744; (&#170;cur = &#186;cur(c2s conf k := None) 
                &#8743; &#170;partst = &#186;partst(the (&#186;cur (c2s conf k)) := READY)))
          &#8743; (&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))
          &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p )
          &#8743; &#170;qbuf= &#186;qbuf 
          &#8743; &#170;qbufsize= &#186;qbufsize&#10628; &#8746; Id),
       &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">id_belong</span><span class="delimiter">[</span><span class="">simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Id &#8838;&#10627;&#170;x= &#186;x&#10628;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">Id_fstsnd_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Send_Que_Message_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Send_Que_Message_RGCond k p m &#8801; (
            RG[&#10627;True&#10628;,
               &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k)&#10628;, 
               (&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                  &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;),
               &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Recv_Que_Message_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Recv_Que_Message_RGCond k p &#8801; 
           RG[&#10627;True&#10628;,
              &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k)&#10628;,
              (&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                  &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;),
              &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Core_Init_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Core_Init_RGF k &#8801; (Core_Init k, Core_Init_RGCond k)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Schedule_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Part &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Schedule_RGF k p &#8801; (Schedule k p, Schedule_RGCond k p)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Send_Que_Message_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Send_Que_Message_RGF k p m &#8801; (Send_Que_Message k p m, Send_Que_Message_RGCond k p m)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Recv_Que_Message_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Recv_Que_Message_RGF k p  &#8801; (Recv_Que_Message k p, Recv_Que_Message_RGCond k p)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">EvtSys1_on_Core_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;EvtSys1_on_Core_RGF k &#8801; 
            (rgf_EvtSys (&#8899;p.{Schedule_RGF k p} &#8746;
                          (&#8899;(p, m). {Send_Que_Message_RGF k p m}) &#8746;
                          (&#8899;p.{Recv_Que_Message_RGF k p})),
               RG[&#10627;True&#10628;,
                  &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k) &#8743;
                      (&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst  p = &#186;partst p)&#10628;,
                  ((&#8899;p.&#10627;(&#170;cur = &#186;cur(c2s conf k := Some p) 
                        &#8743; &#170;partst = &#186;partst(the (&#170;cur(c2s conf k)) := RUN) 
                        &#8743; p2s conf p = c2s conf k
                       &#8744; (&#170;cur = &#186;cur(c2s conf k := None) 
                          &#8743; &#170;partst = &#186;partst(the (&#186;cur (c2s conf k)) := READY)))
                    &#8743; (&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))
                    &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p )
                    &#8743; &#170;qbuf= &#186;qbuf 
                    &#8743; &#170;qbufsize= &#186;qbufsize&#10628;) &#8746;
                   (&#8899;p.&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                        (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                          &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                        (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                        (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;) &#8746; 
                    Id),
                  &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">EvtSys_on_Core_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;EvtSys_on_Core_RGF k  &#8801; 
          (rgf_EvtSeq (Core_Init_RGF k) (EvtSys1_on_Core_RGF k),
           RG[&#10627;&#8704;p. p2s conf p = c2s conf k &#10230; &#180;partst p = IDLE&#10628;,
              &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k) &#8743;
                  (&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst  p = &#186;partst p)&#10628;,
              ((&#8899;p.&#10627;(&#170;cur = &#186;cur(c2s conf k := Some p) 
                      &#8743; &#170;partst = &#186;partst(the (&#170;cur(c2s conf k)) := RUN) 
                      &#8743; p2s conf p = c2s conf k
                       &#8744; (&#170;cur = &#186;cur(c2s conf k := None) 
                          &#8743; &#170;partst = &#186;partst(the (&#186;cur (c2s conf k)) := READY)))
                    &#8743; (&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))
                    &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p )
                    &#8743; &#170;qbuf= &#186;qbuf 
                    &#8743; &#170;qbufsize= &#186;qbufsize&#10628;) &#8746;
                   (&#8899;p.&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                        (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                          &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                        (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                        (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;) &#8746; 
                    Id &#8746;
                    &#10627;&#170;cur= &#186;cur &#8743; &#170;qbuf= &#186;qbuf &#8743; &#170;qbufsize= &#186;qbufsize
                      &#8743; (&#8704;p. p2s conf p = c2s conf k &#10230; &#186;partst p = IDLE &#8743; &#170;partst p = READY)
                      &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p)&#10628;),
              &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Core, State) rgformula_par&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;ARINCXKernel_Spec &#8801; (&#955;k. EvtSys_on_Core_RGF k)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Functional correctness by rely guarantee proof&#8250;</span><span class="">
</span><span class="keyword1"><span class="command">consts</span></span><span class=""> </span><span class="">s0</span><span class="delimiter">::</span><span class="">State</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">s0_witness</span><span class="delimiter">::</span><span class="string">&quot;State&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;s0_witness &#8801; fst (System_Init conf)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">specification</span></span><span class=""> </span><span class="delimiter">(</span><span class="">s0</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="">s0_init</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;s0 &#8801; fst (System_Init conf)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_coreinit</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;k1&#8800;k2 &#10233; Core_Init k1&#8800;Core_Init k2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_schedule</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(k1&#8800;k2 &#8744; p1&#8800;p2) &#10233; Schedule k1 p1 &#8800; Schedule k2 p2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_wrt_samp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(k1&#8800;k2 &#8744; p1&#8800;p2 &#8744; m1&#8800;m2) 
  &#10233; Send_Que_Message k1 p1 m1 &#8800; Send_Que_Message k2 p2 m2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">clarsimp</span><span class="delimiter">,</span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_rd_samp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(k1&#8800;k2 &#8744; p1&#8800;p2) &#10233; Recv_Que_Message k1 p1 &#8800; Recv_Que_Message k2 p2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">clarsimp</span><span class="delimiter">,</span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_coreinit_sched</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Schedule k2 p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Send_Que_Message k2 p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Recv_Que_Message k2 p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Schedule k1 p1 &#8800; Send_Que_Message k2 p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_def</span><span class=""> </span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Schedule k1 p1 &#8800; Recv_Que_Message k2 p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_def</span><span class=""> </span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Send_Que_Message k1 p1 m &#8800; Recv_Que_Message k2 p2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_def</span><span class=""> </span><span class="">Send_Que_Message_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">evtrgfset</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;((EventLabel, Core, State) event &#215; (State rgformula)) set&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;evtrgfset &#8801; (&#8899;k.{(Core_Init k, Core_Init_RGCond k)})
                  &#8746; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})
                  &#8746; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})
                  &#8746; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = evtrgfset&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (fst (ARINCXKernel_Spec k)))&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">all_evts_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (fst (EvtSys_on_Core_RGF k)))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (rgf_EvtSeq (Core_Init_RGF k) (EvtSys1_on_Core_RGF k)))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {Core_Init_RGF k} &#8746; (all_evts_es (fst (EvtSys1_on_Core_RGF k))))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {Core_Init_RGF k} &#8746;
                                                  (&#8899;p.{Schedule_RGF k p} &#8746;
                                                  (&#8899;(p, m). {Send_Que_Message_RGF k p m}) &#8746;
                                                  (&#8899;p.{Recv_Que_Message_RGF k p}))
                                             )&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {(Core_Init k, Core_Init_RGCond k)} &#8746;
                                                  (&#8899;p.{(Schedule k p, Schedule_RGCond k p)}) &#8746;
                                                  (&#8899;(p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)}) &#8746;
                                                  (&#8899;p.{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})
                                             )&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;(&#8899;k. {(Core_Init k, Core_Init_RGCond k)} &#8746;
                (&#8899;p.{(Schedule k p, Schedule_RGCond k p)}) &#8746;
                (&#8899;(p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)}) &#8746;
                (&#8899;p.{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})
           ) = 
           (&#8899;k. {(Core_Init k, Core_Init_RGCond k)}) &#8746;
           (&#8899;k. (&#8899;p.{(Schedule k p, Schedule_RGCond k p)})) &#8746;
           (&#8899;k. (&#8899;(p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})) &#8746;
           (&#8899;k. (&#8899;p.{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)}))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">)</span><span class=""> </span><span class="">UN_Un_distrib</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;(&#8899;k. (&#8899;p.{(Schedule k p, Schedule_RGCond k p)}))
          = (&#8899;(k, p). {(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;(&#8899;k. (&#8899;(p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)}))
          = (&#8899;(k, p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">moreover</span></span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;(&#8899;k. (&#8899;p.{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)}))
          = (&#8899;(k,p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">ultimately</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Core, State) event &#8658; (State rgformula) option&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;evtrgffun &#8801; (&#955;e. Some (SOME rg. (e, rg)&#8712;evtrgfset))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;e&#8712;Domain evtrgfset. &#8707;ef&#8712;evtrgfset. E<span class="hidden">&#8681;</span><sub>e</sub> ef = e &#8743; evtrgffun e = Some (snd ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">evtrgffun_def</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">someI_ex</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef1 ef2. ef1&#8712;evtrgfset &#8743; ef2&#8712;evtrgfset &#8743; ef1&#8800;ef2 &#10230; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1&#8712;(&#8899;k.{(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_sched</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_sched</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_schedule</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_wrt_samp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">neq_rd_samp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgfset_func</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">{</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">ef</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">a0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;evtrgfset&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&#8712;Domain evtrgfset&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">surjective_pairing</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">ef1</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8712;evtrgfset &#8743; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 = E<span class="hidden">&#8681;</span><sub>e</sub> ef &#8743; evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef1)&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">[</span><span class="">rule_format</span><span class="delimiter">,</span><span class="">of</span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">b0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8800;ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class=""> </span><span class="">a0</span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">}</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. ef&#8712;all_evts_es (fst (ARINCXKernel_Spec k)) &#10230; is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">{</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">k</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">p0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (ARINCXKernel_Spec k))&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (EvtSys_on_Core_RGF k))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ef&#8712;insert (Core_Init_RGF k) (all_evts_es (fst (EvtSys1_on_Core_RGF k)))&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ef = (Core_Init_RGF k) &#8744; ef&#8712;all_evts_es (fst (EvtSys1_on_Core_RGF k))&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">proof</span></span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">a0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef = Core_Init_RGF k&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> 
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (EvtSys1_on_Core_RGF k))&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p. ef = Schedule_RGF k p} &#8746;
                      {ef. &#8707;p m. ef = Send_Que_Message_RGF k p m} &#8746;
                      {ef. &#8707;p. ef = Recv_Que_Message_RGF k p}&quot;</span><span class=""> 
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">all_evts_es_esys</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p. ef = Schedule_RGF k p} 
                  &#8744; ef&#8712;{ef. &#8707;p m. ef = Send_Que_Message_RGF k p m} 
                  &#8744; ef&#8712;{ef. &#8707;p. ef = Recv_Que_Message_RGF k p}&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">proof</span></span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p. ef = Schedule_RGF k p}&quot;</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">            </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p m. ef = Send_Que_Message_RGF k p m}
                    &#8744; ef&#8712;{ef. &#8707;p. ef = Recv_Que_Message_RGF k p}&quot;</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> 
</span><span class="">              </span><span class="keyword1"><span class="command">proof</span></span><span class="">
</span><span class="">                </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p m. ef = Send_Que_Message_RGF k p m}&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8707;p m. ef = Send_Que_Message_RGF k p m&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">p</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">m</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;ef = Send_Que_Message_RGF k p m&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">                </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p. ef = Recv_Que_Message_RGF k p}&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;&#8707;p. ef = Recv_Que_Message_RGF k p&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">p</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;ef = Recv_Que_Message_RGF k p&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">              </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">}</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">all_basic_evts_arinc</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;all_evts ARINCXKernel_Spec. is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">all_evts_def</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class="delimiter">]</span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;erg&#8712;all_evts (ARINCXKernel_Spec). (evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> erg))  = Some (snd erg)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgfset_func</span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Core_Init_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. Core_Init k &#8866; Core_Init_RGCond k&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">injI</span><span class=""> </span><span class="">surj_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">inj_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Sched_SatRG_h2</span><span class="delimiter">:</span><span class=""> 
</span><span class="">   </span><span class="string">&quot; &#8866; &#180;cur := &#180;cur(c2s conf k &#8614; p);;
       &#180;partst := &#180;partst (p := RUN) 
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;p2s conf p = c2s conf k &#8743; &#180;cur (c2s conf k) = None&#10628; &#8745; {V}, 
          {(s, t). s = t}, UNIV, 
          &#10627;(&#180;cur = cur V(c2s conf k &#8614; p) &#8743;
             &#180;partst = (partst V)(the (&#180;cur (c2s conf k)) := RUN) &#8743;
             p2s conf p = c2s conf k &#8744;
             &#180;cur = (cur V)(c2s conf k := None) &#8743;
             &#180;partst = (partst V)(the (cur V (c2s conf k)) := READY)) &#8743;
            (&#8704;c. c &#8800; k &#10230; &#180;cur (c2s conf c) = cur V (c2s conf c)) &#8743;
            (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#180;partst p = partst V p) &#8743;
            &#180;qbuf = qbuf V &#8743; &#180;qbufsize = qbufsize V &#8744;
            &#180;(op = V)&#10628;]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;p2s conf p = c2s conf k &#8743; (cur V) (c2s conf k) = None&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{s. s = V &#10631; cur := (cur V) (c2s conf k := Some p)&#10632;}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">disjI1</span><span class="delimiter">)</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">injI</span><span class=""> </span><span class="">surj_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">inj_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Sched_SatRG_h1</span><span class="delimiter">:</span><span class="">
</span><span class="">    </span><span class="string">&quot;&#8866; &#180;partst := &#180;partst(the (&#180;cur (c2s conf k)) := READY);;
       &#180;cur := &#180;cur (c2s conf k := None) 
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;p2s conf p = c2s conf k &#8743; &#180;partst p &#8800; IDLE &#8743; (&#180;cur (c2s conf k) = None 
            &#8744; p2s conf (the (&#180;cur (c2s conf k))) = c2s conf k)&#10628; &#8745;
                &#10627;&#8707;y. &#180;cur (c2s conf k) = Some y&#10628; &#8745; {V}, 
           {(s, t). s = t}, UNIV, 
           &#10627;(&#180;cur = cur V(c2s conf k &#8614; p) &#8743;
               &#180;partst = (partst V)(the (&#180;cur (c2s conf k)) := RUN) &#8743;
               p2s conf p = c2s conf k &#8744;
               &#180;cur = (cur V)(c2s conf k := None) &#8743;
               &#180;partst = (partst V)(the (cur V (c2s conf k)) := READY)) &#8743;
              (&#8704;c. c &#8800; k &#10230; &#180;cur (c2s conf c) = cur V (c2s conf c)) &#8743;
              (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#180;partst p = partst V p) &#8743;
              &#180;qbuf = qbuf V &#8743; &#180;qbufsize = qbufsize V &#8744;
              &#180;(op = V)&#10628; &#8745;
             &#10627;p2s conf p = c2s conf k &#8743; &#180;cur (c2s conf k) = None&#10628;]&quot;</span><span class="">
</span><span class="">   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;p2s conf p = c2s conf k &#8743; partst V p &#8800; IDLE 
          &#8743; ((cur V) (c2s conf k) = None &#8744; p2s conf (the ((cur V) (c2s conf k))) = c2s conf k) 
            &#8743; (&#8707;y. (cur V) (c2s conf k) = Some y)&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{s. s = V &#10631; partst := (partst V) (the ((cur V) (c2s conf k)) := READY)&#10632;
                                   &#8743; p2s conf p = c2s conf k}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">disjI1</span><span class="delimiter">)</span><span class=""> 
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">injI</span><span class=""> </span><span class="">surj_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">inj_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class=""> 
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;cur V (c2s conf k) = None&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">injI</span><span class=""> </span><span class="">surj_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">inj_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Sched_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Schedule k p &#8866; Schedule_RGCond k p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">            </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;p2s conf p = c2s conf k &#8743; &#180;cur(c2s conf k) = None &#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Cond</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Sched_SatRG_h1</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Sched_SatRG_h2</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">                  </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Send_Que_Message_SatRG_h1</span><span class="delimiter">:</span><span class=""> 
</span><span class="">    </span><span class="string">&quot;&#8866; &#180;qbuf := &#180;qbuf(ch_srcqport conf p := &#180;qbuf (ch_srcqport conf p) @ [m]);;
       &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p :=
              Suc (&#180;qbufsize (ch_srcqport conf p)))
      sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;is_src_qport conf p &#8743; (&#8707;y. &#180;cur ((c2s conf) k) = Some y) 
              &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))&#10628; &#8745;
             &#10627;&#180;qbufsize (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p)&#10628; &#8745; {V}, 
             {(s, t). s = t}, UNIV, 
            &#10627;&#180;(Pair V) &#8712; &#10627;&#170;cur = &#186;cur &#8743;
                         &#170;partst = &#186;partst &#8743;
                         (&#186;qbufsize (ch_srcqport conf p) =
                          length (&#186;qbuf (ch_srcqport conf p)) &#10230;
                          &#170;qbufsize (ch_srcqport conf p) =
                          length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;&#10628; &#8745; UNIV]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;is_src_qport conf p &#8743; (&#8707;y. (cur V) ((c2s conf) k) = Some y) 
                  &#8743; port_of_part conf p (the ((cur V) ((c2s conf) k)))
                  &#8743; (qbufsize V) (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p)&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{s. s = V&#10631;qbuf := (qbuf V)(ch_srcqport conf p 
                                    := (qbuf V) (ch_srcqport conf p) @ [m])&#10632;}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Send_Que_Message_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;Send_Que_Message k p m &#8866; Send_Que_Message_RGCond k p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">          </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Send_Que_Message_SatRG_h1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Recv_Que_Message_SatRG_h1</span><span class="delimiter">:</span><span class=""> 
</span><span class="">    </span><span class="string">&quot;&#8866; &#180;qbuf := &#180;qbuf(ch_srcqport conf p := tl (&#180;qbuf (ch_srcqport conf p)));;
       &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) - Suc 0) 
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;is_dest_qport conf p &#8743; (&#8707;y. &#180;cur ((c2s conf) k) = Some y) 
              &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))&#10628; &#8745;
            &#10627;0 &lt; &#180;qbufsize (ch_srcqport conf p)&#10628; &#8745; {V}, 
          {(s, t). s = t}, UNIV, 
          &#10627;&#180;(Pair V) &#8712; &#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                         (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p)) &#10230;
                          &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;&#10628; &#8745; UNIV]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;is_dest_qport conf p &#8743; (&#8707;y. (cur V) ((c2s conf) k) = Some y) 
                  &#8743; port_of_part conf p (the ((cur V) ((c2s conf) k)))
                  &#8743; 0 &lt; (qbufsize V) (ch_srcqport conf p)&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{s. s = V&#10631;qbuf := (qbuf V)(ch_srcqport conf p := tl ((qbuf V) (ch_srcqport conf p)))&#10632;}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;{}&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Recv_Que_Message_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Recv_Que_Message k p &#8866; Recv_Que_Message_RGCond k p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">            </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Recv_Que_Message_SatRG_h1</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">EvtSys1_on_core_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8704;k. &#8866; fst (EvtSys1_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSys_h</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Sched_SatRG</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Send_Que_Message_SatRG</span><span class=""> </span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Abs_unit_cases</span><span class=""> </span><span class="">empty_iff</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Recv_Que_Message_SatRG</span><span class=""> </span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Abs_unit_cases</span><span class=""> </span><span class="">empty_iff</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k xa)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGF_def</span><span class=""> </span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGF_def</span><span class=""> </span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">EvtSys_on_core_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8704;k. &#8866; fst (EvtSys_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">              </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSeq_h</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Core_Init_SatRG</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">EvtSys1_on_core_SatRG</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">          </span><span class="">getrgformula_def</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> 
</span><span class="">          </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">spec_sat_rg</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8866; ARINCXKernel_Spec SAT [{s0}, {}, UNIV, UNIV]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">ParallelESys</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">EvtSys_on_core_SatRG</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">s0_def</span><span class=""> </span><span class="">System_Init_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> 
</span><span class="">        </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">          
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">Id_fstsnd_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Invariant proof&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">cur_part_cond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;cur_part_cond s &#8801; &#8704;sched p. (cur s) sched = Some p &#10230; sched = (p2s conf) p&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">cur_part_inv</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(State) invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;cur_part_inv &#8801; {s. cur_part_cond s}&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">cur_part_mode_cond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;cur_part_mode_cond s &#8801; 
          &#8704;sched p. p2s conf p = sched &#8743; (cur s) sched = Some p &#10230; (partst s) p = RUN&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">cur_part_mode_inv</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(State) invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;cur_part_mode_inv &#8801; {s. cur_part_mode_cond s}&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">qbuf_size_cond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;qbuf_size_cond s &#8801; &#8704;c. (qbufsize s) c = length ((qbuf s) c)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">qbuf_size_inv</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(State) invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;qbuf_size_inv &#8801; {s. qbuf_size_cond s}&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="string">&quot;invariant &#8801; cur_part_inv &#8745; cur_part_mode_inv &#8745; qbuf_size_inv&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">init_sat_inv</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;{s0}&#8838; invariant&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">s0_init</span><span class=""> </span><span class="">System_Init_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">cur_part_inv_def</span><span class=""> </span><span class="">cur_part_cond_def</span><span class=""> 
</span><span class="">          </span><span class="">cur_part_mode_inv_def</span><span class=""> </span><span class="">cur_part_mode_cond_def</span><span class=""> </span><span class="">qbuf_size_inv_def</span><span class=""> </span><span class="">qbuf_size_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_coreinit</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant (&#10627;&#170;cur= &#186;cur &#8743; &#170;qbuf= &#186;qbuf &#8743; &#170;qbufsize= &#186;qbufsize 
            &#8743; (&#8704;p. p2s conf p = c2s conf k &#10230; &#186;partst p = IDLE &#8743; &#170;partst p = READY)
            &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p)&#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">cur_part_inv_def</span><span class=""> </span><span class="">cur_part_cond_def</span><span class=""> 
</span><span class="">          </span><span class="">cur_part_mode_inv_def</span><span class=""> </span><span class="">cur_part_mode_cond_def</span><span class=""> </span><span class="">qbuf_size_inv_def</span><span class=""> </span><span class="">qbuf_size_cond_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">presburger</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x = y&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;p2s conf p = c2s conf k&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">PartMode.distinct</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">surj_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_sched</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant 
          (&#10627;(&#170;cur = &#186;cur(c2s conf k := Some p) &#8743; &#170;partst = &#186;partst(the (&#170;cur(c2s conf k)) := RUN) 
              &#8743; p2s conf p = c2s conf k
             &#8744; (&#170;cur = &#186;cur(c2s conf k := None) &#8743; &#170;partst = &#186;partst(the (&#186;cur (c2s conf k)) := READY)))
          &#8743; (&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))
          &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p )
          &#8743; &#170;qbuf= &#186;qbuf 
          &#8743; &#170;qbufsize= &#186;qbufsize&#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">cur_part_inv_def</span><span class=""> </span><span class="">cur_part_cond_def</span><span class=""> 
</span><span class="">          </span><span class="">cur_part_mode_inv_def</span><span class=""> </span><span class="">cur_part_mode_cond_def</span><span class=""> </span><span class="">qbuf_size_inv_def</span><span class=""> </span><span class="">qbuf_size_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">option.sel</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">option.discI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;p2s conf pa = c2s conf k&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">surj_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_sndmsg</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;stable invariant 
    (&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                  &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">cur_part_inv_def</span><span class=""> </span><span class="">cur_part_cond_def</span><span class="">
</span><span class="">          </span><span class="">cur_part_mode_inv_def</span><span class=""> </span><span class="">qbuf_size_inv_def</span><span class=""> </span><span class="">qbuf_size_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">cur_part_mode_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_recvmsg</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;stable invariant 
    (&#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
                  &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">cur_part_inv_def</span><span class=""> </span><span class="">cur_part_cond_def</span><span class="">
</span><span class="">          </span><span class="">cur_part_mode_inv_def</span><span class=""> </span><span class="">qbuf_size_inv_def</span><span class=""> </span><span class="">qbuf_size_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">cur_part_mode_cond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evts_stb_invar</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. stable invariant (Guar<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_coreinit</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;(k, p). {(Schedule k p, Schedule_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_sched</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;(k, p, m). {(Send_Que_Message k p m, Send_Que_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Send_Que_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_sndmsg</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;(k, p). {(Recv_Que_Message k p, Recv_Que_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Recv_Que_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_recvmsg</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">ARINC_invariant_theorem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;invariant_of_pares (paresys_spec ARINCXKernel_Spec) {s0} invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">invariant_theorem</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class=""> </span><span class="string">&quot;{s0}&quot;</span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="">invariant</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="">spec_sat_rg</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class=""> 
</span><span class="">    </span><span class="">all_basic_evts_arinc</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">init_sat_inv</span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword2"><span class="keyword">end</span></span></pre>

</div>
</body>
</html>
