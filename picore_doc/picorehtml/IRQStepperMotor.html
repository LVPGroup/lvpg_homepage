<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory IRQStepperMotor (Isabelle2017: October 2017)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory IRQStepperMotor</h1>

<span class="command">theory</span> <span class="name">IRQStepperMotor</span><br/>
<span class="keyword">imports</span> <a href="PiCore_Syntax.html"><span class="name">PiCore_Syntax</span></a> <a href="PiCore_RG_Invariant.html"><span class="name">PiCore_RG_Invariant</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment">(*
Created by Yongwang Zhao (zhaoyongwang@gmail.com, zhaoyw@buaa.edu.cn)
School of Computer Science &amp; Engineering, Beihang University, China
*)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">section</span></span><span class=""> </span><span class="cartouche">&#8249;Formal Specification and Reasoning of an Interruptable Controller for Stepper Motor&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theory</span></span><span class=""> </span><span class="">IRQStepperMotor</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">imports</span></span><span class=""> </span><span class="">PiCore_Syntax</span><span class=""> </span><span class="">PiCore_RG_Invariant</span><span class="">
</span><span class="keyword2"><span class="keyword">begin</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;functional specification&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">Device</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Ctrl</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Radar</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">PIC</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">Irq</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">C</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">R</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">record</span></span><span class=""> </span><span class="">State</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">stack</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq list&quot;</span><span class="">
</span><span class="">               </span><span class="">iflag</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="">bool</span><span class="">
</span><span class="">               </span><span class="">car_pos</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="">int</span><span class="">
</span><span class="">               </span><span class="">obstacle_pos</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int list&quot;</span><span class="">
</span><span class="">               </span><span class="">i</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="">int</span><span class="">
</span><span class="">               </span><span class="">pos_aux</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="">int</span><span class="">
</span><span class="">               </span><span class="">obst_pos_aux</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int list&quot;</span><span class="">
</span><span class="">               
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">EL</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">ForwardH</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">BackwardH</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">ObstacleH</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">IRQsE</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">datatype</span></span><span class=""> </span><span class="">Parameter</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Irq</span><span class=""> </span><span class="">Irq</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Integer</span><span class=""> </span><span class="">int</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Str</span><span class=""> </span><span class="">string</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Natural</span><span class=""> </span><span class="">nat</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">type_synonym</span></span><span class=""> </span><span class="">EventLabel</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;EL &#215; (Parameter list &#215; Device)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">get_evt_label</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;EL &#8658; Parameter list &#8658; Device &#8658; EventLabel&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ _ @ _&quot;</span><span class=""> </span><span class="delimiter">[</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">]</span><span class=""> </span><span class="">20</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;get_evt_label el ps k &#8801; (el,(ps,k))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">iret</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State prog&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;iret &#8801; &#180;stack := tl &#180;stack&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">push</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq &#8658; State prog&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;push d &#8801; &#180;stack := d # (&#180;stack)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">cli</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State prog&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;cli &#8801; &#180;iflag := False&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">sti</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State prog&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;sti &#8801; &#180;iflag := True&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">stm</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq &#8658; State prog &#8658; State prog&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ &#9656; _&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;stm d p &#8801; AWAIT hd &#180;stack = d THEN p END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">willcollide</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int &#8658; int &#8658; int list &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;willcollide s t l &#8801; find (&#955;x. s &#8804; x &#8743; x &#8804; t) l = None&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">collide</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;&#39;a &#8658; &#39;a list &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;collide pos l &#8801; find (&#955;x. x = pos) l &#8800; None&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(*
simulating the interrupt happening to PIC 
*)</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">IRQs</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq &#8658; (EventLabel, Device, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;IRQs d &#8801; 
    EVENT IRQsE [Irq d] @ PIC
    THEN 
      ATOMIC
        (*the interrupt is the one being handled have to be delayed(skipped)
          the interrupt should not be the PIC *)
        IF hd &#180;stack &#8800; d THEN push d FI
      END
    END&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(*
application on top of OSs drives the car forward by invoking this service.
int v is the value how far the app want to move the car forward.
*)</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">forward</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (EventLabel, Device, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;forward v &#8801; 
    EVENT ForwardH [Natural v] @ Ctrl
    THEN 
      (C &#9656; &#180;i := 0);;
      (C &#9656; &#180;pos_aux := &#180;car_pos);;
      WHILE &#180;i &#8800; int v &#8743; &#172;collide (&#180;car_pos + 1) &#180;obstacle_pos DO
        (C &#9656; ATOMIC 
                IF &#172;collide (&#180;car_pos + 1) &#180;obstacle_pos THEN 
                  &#180;car_pos := &#180;car_pos + 1 
                FI
              END);; 
        (C &#9656; &#180;i := &#180;i + 1)
      OD;;
      (C &#9656; iret)
    END&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(*
application on top of OSs drives the car backward by invoking this service.
int v is the value how far the app want to move the car backward. 
*)</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">backward</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (EventLabel, Device, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;backward v &#8801; 
    EVENT BackwardH [Natural v] @ Ctrl
    THEN 
      (C &#9656; &#180;i := 0);;
      (C &#9656; &#180;pos_aux := &#180;car_pos);;
      WHILE &#180;i &#8800; int v &#8743; &#172;collide (&#180;car_pos - 1) &#180;obstacle_pos DO
        (C &#9656; ATOMIC 
                IF &#172;collide (&#180;car_pos - 1) &#180;obstacle_pos THEN 
                  &#180;car_pos := &#180;car_pos - 1 
                FI 
              END);; 
        (C &#9656; &#180;i := &#180;i + 1)
      OD;;      
      (C &#9656; iret)
    END&quot;</span><span class="">
</span><span class="">
</span><span class="comment">(* 
The radar monitoring: an obstacle occurs at one position of the axis.
the position should not be the car position now. Or else accident happens directly.
*)</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">obstacle</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int &#8658; (EventLabel, Device, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;obstacle v &#8801; 
    EVENT ObstacleH [Integer v] @ Radar
    THEN 
      (R &#9656; &#180;obst_pos_aux :=  &#180;obstacle_pos);;
      (R &#9656; IF v &#8800; &#180;car_pos &#8743; v &#8800; &#180;car_pos + 1 &#8743; v &#8800; &#180;car_pos - 1 THEN
              &#180;obstacle_pos :=  v # &#180;obstacle_pos
           FI);;
      (R &#9656; iret)  
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Rely-guarantee condition of events&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">forward_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;forward_RGCond v &#8801; 
          RG[&#10627;True&#10628;,

          (&#10627;&#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux 
            &#8743; (hd &#186;stack &#8800; C &#10230; ((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos 
                                  &#8744; &#170;stack = C # &#186;stack) &#8743; &#170;obstacle_pos = &#186;obstacle_pos)
                                  &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                      &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
            &#8743; (hd &#186;stack = C &#10230; &#186;obstacle_pos = &#170;obstacle_pos &#8743; &#170;stack = R # &#186;stack
                                &#8743; &#186;obst_pos_aux = &#170;obst_pos_aux)&#10628; &#8746; Id),

          (&#10627;hd &#186;stack = C &#8743; (((&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack) &#8743; &#170;car_pos = &#186;car_pos) &#8744; 
            (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1))
            &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id),

          &#10627;&#180;car_pos = &#180;pos_aux + &#180;i &#8743; 
            (&#180;i = int v &#8744; collide (&#180;pos_aux + &#180;i + 1) &#180;obstacle_pos) &#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">backward_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;backward_RGCond v &#8801; 
          RG[&#10627;True&#10628;,

          (&#10627;&#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux 
            &#8743; (hd &#186;stack &#8800; C &#10230; ((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos 
                                  &#8744; &#170;stack = C # &#186;stack) &#8743; &#170;obstacle_pos = &#186;obstacle_pos)
                                  &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                      &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos))
            &#8743; (hd &#186;stack = C &#10230; &#186;obstacle_pos = &#170;obstacle_pos &#8743; &#170;stack = R # &#186;stack
                                &#8743; &#186;obst_pos_aux = &#170;obst_pos_aux)&#10628; &#8746; Id),

          (&#10627;hd &#186;stack = C &#8743; (((&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack) &#8743; &#170;car_pos = &#186;car_pos) &#8744; 
            (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1))
            &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id),

          &#10627;&#180;car_pos = &#180;pos_aux - &#180;i &#8743; 
            (&#180;i = int v &#8744; collide (&#180;pos_aux - &#180;i - 1) &#180;obstacle_pos) &#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">obstacle_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;obstacle_RGCond v &#8801; 
          RG[&#10627;True&#10628;,

          (&#10627;&#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux &#8743;
           (hd &#186;stack &#8800; R &#10230; &#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack 
              &#8744; (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) 
              &#8744; (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1)
              &#8744; &#170;stack = R # &#186;stack) &#8743;
           (hd &#186;stack = R &#10230; &#186;car_pos = &#170;car_pos &#8743; &#186;i = &#170;i &#8743; &#170;pos_aux = &#186;pos_aux 
                                &#8743; &#170;stack = C # &#186;stack) &#10628; &#8746; Id),

          (&#10627;hd &#186;stack = R &#8743; (((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos) &#8743; &#170;obstacle_pos = &#186;obstacle_pos) 
                                &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                    &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                    &#8743; collide &#186;car_pos &#186;obstacle_pos = collide &#170;car_pos &#170;obstacle_pos
                                    &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
            &#8743; &#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#10628; &#8746; Id),
          &#10627;&#180;obstacle_pos = v # &#180;obst_pos_aux &#8744; &#180;obstacle_pos = &#180;obst_pos_aux&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">IRQs_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;IRQs_RGCond d &#8801; 
          RG[&#10627;True&#10628;,
            &#10627;True&#10628;,
            (&#10627;hd &#186;stack &#8800; d &#8743; &#170;stack = d # &#186;stack &#8743; &#170;car_pos = &#186;car_pos 
              &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
              &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id),
            &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">forward_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (EventLabel, Device, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;forward_RGF v &#8801; (forward v, forward_RGCond v)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">backward_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;nat &#8658; (EventLabel, Device, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;backward_RGF v &#8801; (backward v, backward_RGCond v)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">obstacle_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;int &#8658; (EventLabel, Device, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;obstacle_RGF v &#8801; (obstacle v, obstacle_RGCond v)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">IRQs_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Irq &#8658; (EventLabel, Device, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;IRQs_RGF r &#8801; (IRQs r, IRQs_RGCond r)&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">EvtSys_on_Motor_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Device, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;EvtSys_on_Motor_RGF  &#8801; 
          (rgf_EvtSys ((&#8899;v.{forward_RGF v}) &#8746;
                          (&#8899;v. {backward_RGF v})),
               RG[&#10627;True&#10628;,
                  (&#10627;&#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux 
                      &#8743; (hd &#186;stack &#8800; C &#10230; ((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos 
                                            &#8744; &#170;stack = C # &#186;stack) &#8743; &#170;obstacle_pos = &#186;obstacle_pos)
                                            &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                                &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                                &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
                      &#8743; (hd &#186;stack = C &#10230; &#186;obstacle_pos = &#170;obstacle_pos &#8743; &#170;stack = R # &#186;stack
                                          &#8743; &#186;obst_pos_aux = &#170;obst_pos_aux)&#10628; &#8746; Id),

                  (&#10627;hd &#186;stack = C &#8743; (&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack &#8744; 
                    (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) &#8744;
                    (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1))
                    &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id),

                  (&#8899;v. &#10627;&#180;car_pos = &#180;pos_aux + &#180;i &#8743; (&#180;i = int v &#8744; collide (&#180;car_pos + 1) &#180;obstacle_pos) &#8744;
                    &#180;car_pos = &#180;pos_aux - &#180;i &#8743; (&#180;i = int v &#8744; collide (&#180;car_pos - 1) &#180;obstacle_pos) &#10628;)])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">EvtSys_on_Radar_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Device, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;EvtSys_on_Radar_RGF  &#8801; 
          (rgf_EvtSys (&#8899;v.{obstacle_RGF v}),
               RG[&#10627;True&#10628;,

                  (&#10627;&#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux &#8743;
                   (hd &#186;stack &#8800; R &#10230; &#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack 
                      &#8744; (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) 
                      &#8744; (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1)
                      &#8744; &#170;stack = R # &#186;stack) &#8743;
                   (hd &#186;stack = R &#10230; &#186;car_pos = &#170;car_pos &#8743; &#186;i = &#170;i &#8743; &#170;pos_aux = &#186;pos_aux 
                                        &#8743; &#170;stack = C # &#186;stack) &#10628; &#8746; Id),
        
                  (&#10627;hd &#186;stack = R &#8743; (((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos) &#8743; &#170;obstacle_pos = &#186;obstacle_pos) 
                                        &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                            &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                            &#8743; collide &#186;car_pos &#186;obstacle_pos = collide &#170;car_pos &#170;obstacle_pos
                                            &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
                    &#8743; &#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#10628; &#8746; Id),

                  (&#8899;v. &#10627;&#180;obstacle_pos = v # &#180;obst_pos_aux &#8744; &#180;obstacle_pos = &#180;obst_pos_aux&#10628;)])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">EvtSys_on_PIC_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Device, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;EvtSys_on_PIC_RGF  &#8801; 
          (rgf_EvtSys (&#8899;d. {IRQs_RGF d}),
               RG[&#10627;True&#10628;,
                  &#10627;True&#10628;,
                  (&#8899;d. (&#10627;hd &#186;stack &#8800; d &#8743; &#170;stack = d # &#186;stack &#8743; &#170;car_pos = &#186;car_pos 
                    &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
                    &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628;) &#8746; Id),
                  &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">Carsystem_Spec</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Device, State) rgformula_par&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;Carsystem_Spec k &#8801; case k of Ctrl &#8658; EvtSys_on_Motor_RGF
                                    | Radar &#8658; EvtSys_on_Radar_RGF
                                    | PIC &#8658; EvtSys_on_PIC_RGF&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="comment">(*
primrec Carsystem_Spec :: &quot;(EventLabel, Device, State) rgformula_par&quot;
  where &quot;Carsystem_Spec Ctrl = EvtSys_on_Motor_RGF&quot;
      | &quot;Carsystem_Spec Radar = EvtSys_on_Radar_RGF&quot;
      | &quot;Carsystem_Spec PIC = EvtSys_on_PIC_RGF&quot;
*)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Functional correctness by rely guarantee proof&#8250;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">init</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;State&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;init &#8801; &#10631;stack = [], iflag = True, car_pos = 0,
                 obstacle_pos = [], i = 0, 
                 pos_aux = 0, obst_pos_aux = []&#10632;&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">consts</span></span><span class=""> </span><span class="">s0</span><span class="delimiter">::</span><span class="">State</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">s0_witness</span><span class="delimiter">::</span><span class="string">&quot;State&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;s0_witness &#8801; init&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">specification</span></span><span class=""> </span><span class="delimiter">(</span><span class="">s0</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="">s0_init</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;s0 &#8801; init&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. ef&#8712;all_evts_es (fst (Carsystem_Spec k)) &#10230; is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">Carsystem_Spec_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">forward_RGF_def</span><span class=""> </span><span class="">backward_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="">
</span><span class="">                  </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">is_basicevt.simps</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="">
</span><span class="">                    </span><span class="">obstacle_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">is_basicevt.simps</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="">
</span><span class="">                  </span><span class="">IRQs_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">is_basicevt.simps</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">all_basic_evts_arinc</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;all_evts Carsystem_Spec. is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">all_evts_def</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">Carsystem_Spec</span><span class="delimiter">]</span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">evtrgfset</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;((EventLabel, Device, State) event &#215; (State rgformula)) set&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;evtrgfset &#8801; (&#8899;v.{(forward v, forward_RGCond v)})
                      &#8746; (&#8899;v.{(backward v, backward_RGCond v)})
                      &#8746; (&#8899;v.{(obstacle v, obstacle_RGCond v)})
                      &#8746; (&#8899;d.{(IRQs d, IRQs_RGCond d)})&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Device, State) event &#8658; (State rgformula) option&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;evtrgffun &#8801; (&#955;e. Some (SOME rg. (e, rg)&#8712;evtrgfset))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;e&#8712;Domain evtrgfset. &#8707;ef&#8712;evtrgfset. E<span class="hidden">&#8681;</span><sub>e</sub> ef = e &#8743; evtrgffun e = Some (snd ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">evtrgffun_def</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">someI_ex</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgfset_eq_allevts_Spec</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;all_evts Carsystem_Spec = evtrgfset&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts Carsystem_Spec = (&#8899;k. all_evts_es (fst (Carsystem_Spec k)))&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">all_evts_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;all_evts Carsystem_Spec = all_evts_es (fst EvtSys_on_Motor_RGF) &#8746;
                                         all_evts_es (fst EvtSys_on_Radar_RGF) &#8746; 
                                         all_evts_es (fst EvtSys_on_PIC_RGF)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="">Device.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Device.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class="">
</span><span class="">        </span><span class="">forward_RGF_def</span><span class=""> </span><span class="">backward_RGF_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef1 ef2. ef1&#8712;evtrgfset &#8743; ef2&#8712;evtrgfset &#8743; ef1&#8800;ef2 &#10230; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1&#8712;(&#8899;v.{(forward v, forward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(backward v, backward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(obstacle v, obstacle_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;d.{(IRQs d, IRQs_RGCond d)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> 
</span><span class="">            </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1&#8712;(&#8899;v.{(backward v, backward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2&#8712;(&#8899;v.{(forward v, forward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(obstacle v, obstacle_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;d.{(IRQs d, IRQs_RGCond d)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> 
</span><span class="">            </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;v.{(obstacle v, obstacle_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2&#8712;(&#8899;v.{(forward v, forward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(backward v, backward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;d.{(IRQs d, IRQs_RGCond d)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> 
</span><span class="">            </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;d.{(IRQs d, IRQs_RGCond d)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2&#8712;(&#8899;v.{(forward v, forward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(backward v, backward_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;v.{(obstacle v, obstacle_RGCond v)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">obstacle_def</span><span class=""> 
</span><span class="">            </span><span class="">IRQs_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class=""> </span><span class="">evtrgfset_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">force</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evtrgfset_func</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">proof</span></span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">{</span></span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">fix</span></span><span class=""> </span><span class="">ef</span><span class="">
</span><span class="">    </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">a0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;evtrgfset&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&#8712;Domain evtrgfset&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">surjective_pairing</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">obtain</span></span><span class=""> </span><span class="">ef1</span><span class=""> </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8712;evtrgfset &#8743; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 = E<span class="hidden">&#8681;</span><sub>e</sub> ef &#8743; evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef1)&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">[</span><span class="">rule_format</span><span class="delimiter">,</span><span class="">of</span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">proof</span></span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">next</span></span><span class="">
</span><span class="">        </span><span class="keyword3"><span class="command">assume</span></span><span class=""> </span><span class="">b0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8800;ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class=""> </span><span class="">a0</span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword1"><span class="command">have</span></span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">with</span></span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">}</span></span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">then</span></span><span class=""> </span><span class="keyword3"><span class="command">show</span></span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">qed</span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;erg&#8712;all_evts (Carsystem_Spec). (evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> erg))  = Some (snd erg)&quot;</span><span class="">
</span><span class="">   </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">evtrgfset_func</span><span class=""> </span><span class="">evtrgfset_eq_allevts_Spec</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">id_belong</span><span class="delimiter">[</span><span class="">simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Id &#8838;&#10627;&#170;x= &#186;x&#10628;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">Id_fstsnd_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;set a &#8838; set b &#10233; collide x a &#10233; collide x b&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">collide_def</span><span class="">   </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">find_None_iff</span><span class=""> </span><span class="">subset_eq</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">forward_satRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;forward v &#8866; forward_RGCond v&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">forward_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">guard_def</span><span class="">
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux + &#180;i &#8743; (int v = &#180;i &#8744; collide (&#180;car_pos + 1) &#180;obstacle_pos) &#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux + &#180;i&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;i = 0&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">While</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">collide_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">              
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                                
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux + &#180;i + 1&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Cond</span><span class="delimiter">)</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;V = Va&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">                          
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">iret_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">backward_satRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;backward v &#8866; backward_RGCond v&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">backward_def</span><span class=""> </span><span class="">backward_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">guard_def</span><span class="">
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux - &#180;i &#8743; (int v = &#180;i &#8744; collide (&#180;car_pos - 1) &#180;obstacle_pos) &#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">       </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux - &#180;i&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;i = 0&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">While</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">collide_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">              
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                                
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;car_pos = &#180;pos_aux - &#180;i - 1&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">metis</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Cond</span><span class="delimiter">)</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;V = Va&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">                          
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">                            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> 
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;int v = i x&quot;</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">collide_subset</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">iret_def</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">obstacle_satRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;obstacle v &#8866; obstacle_RGCond v&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">obstacle_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">guard_def</span><span class="">
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;obstacle_pos = v # &#180;obst_pos_aux &#8744; &#180;obstacle_pos = &#180;obst_pos_aux&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">mid</span><span class="delimiter">=</span><span class="string">&quot;&#10627;&#180;obst_pos_aux = &#180;obstacle_pos&#10628;&quot;</span><span class="delimiter">]</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;hd (stack V) = R&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Cond</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;obst_pos_aux V = obstacle_pos V &#8743; hd (stack V) = R &#8743; v &#8800; car_pos V &#8743;
                                     v &#8800; car_pos V + 1 &#8743;
                                     v &#8800; car_pos V -1&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">collide_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">                  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">collide_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">                  
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">           </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stm_def</span><span class="delimiter">)</span><span class="">
</span><span class="">             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">iret_def</span><span class="delimiter">)</span><span class="">
</span><span class="">             </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">               </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">               </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">               </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">               </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">Interrupt_satRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;IRQs d &#8866; IRQs_RGCond d&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">IRQs_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">guard_def</span><span class="">
</span><span class="">                  </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Await</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Cond</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">push_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">EvtSys_on_Motor_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8866; fst (EvtSys_on_Motor_RGF) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Motor_RGF)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Motor_RGF)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Motor_RGF)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Motor_RGF))]&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">                </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSys_h</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; (&#8899;v. {forward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">forward_satRG</span><span class=""> </span><span class="">forward_RGF_def</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">      </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">UN_E</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; (&#8899;v. {backward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">backward_satRG</span><span class=""> </span><span class="">backward_RGF_def</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">      </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">UN_E</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; (&#8899;v. {forward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">forward_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">UNIV_I</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">rgformula.simps</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; (&#8899;v. {backward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">backward_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">backward_RGCond_def</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">UNIV_I</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">rgformula.simps</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">Ball_def</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x&#8712; (&#8899;v. {forward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">forward_RGF_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">backward_RGF_def</span><span class=""> </span><span class="">backward_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x&#8712; (&#8899;v. {forward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">forward_RGF_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">backward_RGF_def</span><span class=""> </span><span class="">backward_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x&#8712; (&#8899;v. {forward_RGF v})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">forward_RGF_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">backward_RGF_def</span><span class=""> </span><span class="">backward_RGCond_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">forward_RGF_def</span><span class=""> </span><span class="">forward_RGCond_def</span><span class=""> </span><span class="">backward_RGF_def</span><span class=""> 
</span><span class="">        </span><span class="">backward_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">EvtSys_on_Radar_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8866; fst (EvtSys_on_Radar_RGF) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Radar_RGF)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Radar_RGF)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Radar_RGF)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Radar_RGF))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">              </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSys_h</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">obstacle_satRG</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">        </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">obstacle_RGF_def</span><span class=""> </span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">EvtSys_on_PIC_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8866; fst (EvtSys_on_PIC_RGF) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_PIC_RGF)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_PIC_RGF)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_PIC_RGF)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_PIC_RGF))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">              </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSys_h</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Interrupt_satRG</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> 
</span><span class="">        </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">IRQs_RGF_def</span><span class=""> </span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">functional_correctness</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8866; Carsystem_Spec SAT 
    [&#10627;True&#10628;, 
     &#10627;&#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
       &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux
       &#8743; (hd &#186;stack &#8800; C &#10230; ((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos 
                              &#8744; &#170;stack = C # &#186;stack) &#8743; &#170;obstacle_pos = &#186;obstacle_pos)
                              &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                  &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                  &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
       &#8743; (hd &#186;stack = C &#10230; &#186;obstacle_pos = &#170;obstacle_pos &#8743; &#170;stack = R # &#186;stack
                            &#8743; &#186;obst_pos_aux = &#170;obst_pos_aux)
       &#8743; (hd &#186;stack &#8800; R &#10230; &#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack 
            &#8744; (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) 
            &#8744; (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1)
            &#8744; &#170;stack = R # &#186;stack)
       &#8743; (hd &#186;stack = R &#10230; &#186;car_pos = &#170;car_pos &#8743; &#186;i = &#170;i &#8743; &#170;pos_aux = &#186;pos_aux 
                              &#8743; &#170;stack = C # &#186;stack)&#10628; &#8746; Id, 
    &#10627;hd &#186;stack = C &#8743; (&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack &#8744; 
      (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) &#8744;
      (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1))
      &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628;
     &#8746; &#10627;hd &#186;stack = R &#8743; (((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos) &#8743; &#170;obstacle_pos = &#186;obstacle_pos) 
                            &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                &#8743; collide &#186;car_pos &#186;obstacle_pos = collide &#170;car_pos &#170;obstacle_pos
                                &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
        &#8743; &#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#10628; 
     &#8746; (&#8899;d. (&#10627;hd &#186;stack &#8800; d &#8743; &#170;stack = d # &#186;stack &#8743; &#170;car_pos = &#186;car_pos 
                    &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
                    &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628;)) &#8746; Id,
   &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">ParallelESys</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">EvtSys_on_Motor_SatRG</span><span class=""> </span><span class="">EvtSys_on_Radar_SatRG</span><span class=""> </span><span class="">EvtSys_on_PIC_SatRG</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="">Device.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">            </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">            </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;a = b&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> 
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x = R&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">functional_correctness2</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8866; Carsystem_Spec SAT 
    [&#10627;True&#10628;, 
     {}, 
    &#10627;hd &#186;stack = C &#8743; (&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack &#8744; 
      (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1) &#8744;
      (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1))
      &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628;
     &#8746; &#10627;hd &#186;stack = R &#8743; (((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos) &#8743; &#170;obstacle_pos = &#186;obstacle_pos) 
                            &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                                &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                                &#8743; collide &#186;car_pos &#186;obstacle_pos = collide &#170;car_pos &#170;obstacle_pos
                                &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
        &#8743; &#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#10628; 
     &#8746; (&#8899;d. (&#10627;hd &#186;stack &#8800; d &#8743; &#170;stack = d # &#186;stack &#8743; &#170;car_pos = &#186;car_pos 
                    &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
                    &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628;)) &#8746; Id,
   &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">ParallelESys</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">EvtSys_on_Motor_SatRG</span><span class=""> </span><span class="">EvtSys_on_Radar_SatRG</span><span class=""> </span><span class="">EvtSys_on_PIC_SatRG</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.case</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="">Device.simps</span><span class="delimiter">(</span><span class="">9</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;j = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;a = b&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="delimiter">(</span><span class="">erule</span><span class=""> </span><span class="">exE</span><span class="delimiter">)</span><span class=""> 
</span><span class="">              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;x = R&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">                </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Irq.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">          </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = PIC&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Radar&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;k = Ctrl&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">  </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">Device.exhaust</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Carsystem_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Motor_RGF_def</span><span class=""> </span><span class="">EvtSys_on_Radar_RGF_def</span><span class=""> 
</span><span class="">          </span><span class="">EvtSys_on_PIC_RGF_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">
</span><span class="keyword1"><span class="command">subsection</span></span><span class=""> </span><span class="cartouche">&#8249;Invariant proof&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">spec_sat_rg</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8866; Carsystem_Spec SAT [{s0}, {}, UNIV, UNIV]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">functional_correctness</span><span class=""> </span><span class="">ParallelESys_conseq</span><span class="">
</span><span class="">    </span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="">pre</span><span class="delimiter">=</span><span class="string">&quot;{s0}&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">pre&#39;</span><span class="delimiter">=</span><span class="string">&quot;UNIV&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">rely</span><span class="delimiter">=</span><span class="string">&quot;{}&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">guar</span><span class="delimiter">=</span><span class="string">&quot;UNIV&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">post</span><span class="delimiter">=</span><span class="string">&quot;UNIV&quot;</span><span class=""> </span><span class="keyword2"><span class="keyword">and</span></span><span class=""> </span><span class="">pesf</span><span class="delimiter">=</span><span class="string">&quot;Carsystem_Spec&quot;</span><span class="delimiter">]</span><span class="">
</span><span class="">      </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">definition</span></span><span class=""> </span><span class="">invariant</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(State) invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2"><span class="keyword">where</span></span><span class=""> </span><span class="string">&quot;invariant &#8801; {s. &#172; collide (car_pos s) (obstacle_pos s)}&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">init_sat_inv</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;{s0}&#8838; invariant&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">s0_init</span><span class=""> </span><span class="">init_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">collide_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_interrupt</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant (&#10627;hd &#186;stack &#8800; d &#8743; &#170;stack = d # &#186;stack &#8743; &#170;car_pos = &#186;car_pos 
              &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#8743; &#170;obstacle_pos = &#186;obstacle_pos 
              &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">collide_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_forward</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant 
      (&#10627;hd &#186;stack = M &#8743; (((&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack) &#8743; &#170;car_pos = &#186;car_pos) &#8744; 
            (&#172;collide (&#186;car_pos + 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos + 1))
            &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">collide_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_backward</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant 
      (&#10627;hd &#186;stack = M &#8743; (((&#170;i = 0 &#8744; &#170;i = &#186;i + 1 &#8744; &#170;stack = tl &#186;stack) &#8743; &#170;car_pos = &#186;car_pos) &#8744; 
            (&#172;collide (&#186;car_pos - 1) &#186;obstacle_pos &#8743; &#170;car_pos = &#186;car_pos - 1))
            &#8743; &#170;obstacle_pos = &#186;obstacle_pos &#8743; &#170;obst_pos_aux = &#186;obst_pos_aux&#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">collide_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">stb_guar_obstacle</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable invariant 
    (&#10627;hd &#186;stack = R &#8743; (((&#170;stack = tl &#186;stack &#8744; &#170;obst_pos_aux = &#186;obstacle_pos) &#8743; &#170;obstacle_pos = &#186;obstacle_pos) 
                          &#8744; (set &#186;obstacle_pos &#8838; set &#170;obstacle_pos
                              &#8743; collide (&#186;car_pos - 1) &#186;obstacle_pos = collide (&#170;car_pos - 1) &#170;obstacle_pos
                              &#8743; collide &#186;car_pos &#186;obstacle_pos = collide &#170;car_pos &#170;obstacle_pos
                              &#8743; collide (&#186;car_pos + 1) &#186;obstacle_pos = collide (&#170;car_pos + 1) &#170;obstacle_pos))
            &#8743; &#170;car_pos = &#186;car_pos &#8743; &#170;i = &#186;i &#8743; &#170;pos_aux = &#186;pos_aux &#10628; &#8746; Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">invariant_def</span><span class=""> </span><span class="">collide_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">lemma</span></span><span class=""> </span><span class="">evts_stb_invar</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. stable invariant (Guar<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">unfolding</span></span><span class=""> </span><span class="">evtrgfset_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(forward k, forward_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">forward_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_forward</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(backward k, backward_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">backward_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_backward</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(obstacle k, obstacle_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">obstacle_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_obstacle</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(IRQs k, IRQs_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">IRQs_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">stb_guar_interrupt</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1"><span class="command">theorem</span></span><span class=""> </span><span class="">Carsystem_invariant_theorem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;invariant_of_pares (paresys_spec Carsystem_Spec) {s0} invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="command">using</span></span><span class=""> </span><span class="">invariant_theorem</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">Carsystem_Spec</span><span class=""> </span><span class="string">&quot;{s0}&quot;</span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="">invariant</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="">spec_sat_rg</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">evtrgfset_eq_allevts_Spec</span><span class=""> 
</span><span class="">    </span><span class="">all_basic_evts_arinc</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">init_sat_inv</span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class=""> </span><span class="keyword1"><span class="command">by</span></span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword2"><span class="keyword">end</span></span><span class="">
</span></pre>

</div>
</body>
</html>
