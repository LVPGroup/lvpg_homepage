<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory ARINC653_MultiCore_Spec_Invar (Isabelle2016: February 2016)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory ARINC653_MultiCore_Spec_Invar</h1>

<span class="command">theory</span> <span class="name">ARINC653_MultiCore_Spec_Invar</span><br/>
<span class="keyword">imports</span> <a href="PiCore_Syntax.html"><span class="name">PiCore_Syntax</span></a> <a href="PiCore_RG_Invariant.html"><span class="name">PiCore_RG_Invariant</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment">(*
Created by:
Yongwang Zhao (ywzhao@ntu.edu.sg, zhaoyw@buaa.edu.cn)
School of Computer Engineering, Nanyang Technological University, Singapore
and School of Computer Science &amp; Engineering, Beihang University, China

David Sanan (sanan@ntu.edu.sg)
School of Computer Engineering, Nanyang Technological University, Singapore
*)</span><span class="">
</span><span class="">
</span><span class="keyword1">section</span><span class=""> </span><span class="cartouche">&#8249;Formal Specification and Reasoning of ARINC653 Multicore Microkernel&#8250;</span><span class="">
</span><span class="">
</span><span class="keyword1">theory</span><span class=""> </span><span class="">ARINC653_MultiCore_Spec_Invar</span><span class="">
</span><span class="keyword2">imports</span><span class=""> </span><span class="">PiCore_Syntax</span><span class=""> </span><span class="">PiCore_RG_Invariant</span><span class="">
</span><span class="keyword2">begin</span><span class="">
</span><span class="">
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">Part</span><span class="">
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">Sched</span><span class="">
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">Message</span><span class=""> 
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">Port</span><span class="">
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">Core</span><span class="">
</span><span class="">
</span><span class="keyword1">typedecl</span><span class=""> </span><span class="">SampChannel</span><span class="">
</span><span class="">
</span><span class="keyword1">record</span><span class=""> </span><span class="">Config</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">c2s</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Sched&quot;</span><span class="">
</span><span class="">                </span><span class="">p2s</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Part &#8658; Sched set&quot;</span><span class="">
</span><span class="">                </span><span class="">p2p</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Port &#8658; Part&quot;</span><span class="">
</span><span class="">                </span><span class="">scsrc</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;SampChannel &#8658; Port&quot;</span><span class="">
</span><span class="">                </span><span class="">scdests</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;SampChannel &#8658; Port set&quot;</span><span class="">  
</span><span class="">  
</span><span class="keyword1">axiomatization</span><span class=""> </span><span class="">conf</span><span class="delimiter">::</span><span class="">Config</span><span class=""> 
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="">bij_c2s</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;bij (c2s conf)&quot;</span><span class=""> </span><span class="keyword2">and</span><span class="">
</span><span class="">        </span><span class="">surj_p2c</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;surj (p2s conf)&quot;</span><span class=""> 
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">inj_surj_c2s</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;inj (c2s conf) &#8743; surj (c2s conf)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">bij_c2s</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">bij_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">gsch</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Core &#8658; Sched&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;gsch cfg k &#8801; (c2s cfg) k&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">is_src_sampport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;is_src_sampport sc p &#8801; (p&#8712;range (scsrc sc))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">is_dest_sampport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;is_dest_sampport sc p &#8801; (p&#8712;&#8899; range (scdests sc))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">port_of_part</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; Part &#8658; bool&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;port_of_part sc po pa &#8801; ((p2p sc) po = pa)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">ch_srcsampport</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; Port &#8658; SampChannel&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;ch_srcsampport sc p &#8801; SOME c. (scsrc sc) c = p&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">record</span><span class=""> </span><span class="">State</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">cur</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Sched &#8658; Part&quot;</span><span class="">
</span><span class="">               </span><span class="">schan</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;SampChannel &#8640; Message&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">cur_part</span><span class="delimiter">::</span><span class="string">&quot;(State) invariant&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;cur_part &#8801; &#10627; &#8704;sched. sched&#8712;(p2s conf) (&#180;cur sched) &#10628;&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">datatype</span><span class=""> </span><span class="">EL</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Core_InitE</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">ScheduleE</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Write_Sampling_MessageE</span><span class=""> </span><span class="delimiter">|</span><span class="">  </span><span class="">Read_Sampling_MessageE</span><span class="">
</span><span class="">
</span><span class="keyword1">datatype</span><span class=""> </span><span class="">parameter</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="">Port</span><span class=""> </span><span class="">Port</span><span class=""> </span><span class="delimiter">|</span><span class=""> </span><span class="">Message</span><span class=""> </span><span class="">Message</span><span class="">
</span><span class="">
</span><span class="keyword1">type_synonym</span><span class=""> </span><span class="">EventLabel</span><span class=""> </span><span class="delimiter">=</span><span class=""> </span><span class="string">&quot;EL &#215; (parameter list &#215; Core)&quot;</span><span class=""> 
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">get_evt_label</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;EL &#8658; parameter list &#8658; Core &#8658; EventLabel&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;_ _ &#8883; _&quot;</span><span class=""> </span><span class="delimiter">[</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">,</span><span class="">0</span><span class="delimiter">]</span><span class=""> </span><span class="">20</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;get_evt_label el ps k &#8801; (el,(ps,k))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Core_Init</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Core_Init k&#8801; 
    EVENT Core_InitE [] &#8883; k 
    WHERE
      True
    THEN 
      SKIP 
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">System_Init</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Config &#8658; (State &#215; (EventLabel, Core, State) x)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;System_Init cfg &#8801; (&#10631;cur=(&#955;c. SOME p. c&#8712;(p2s cfg) p ),
                            schan = (&#955;c. None) &#10632;, 
                            (&#955;k. Core_Init k))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Schedule</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Schedule k &#8801; 
    EVENT ScheduleE [] &#8883; k 
    WHERE
      True
    THEN 
      &#180;cur := &#180;cur((c2s conf) k := SOME p. (c2s conf) k &#8712;(p2s conf) p ) 
    END&quot;</span><span class="">
</span><span class="">                                           
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Write_Sampling_Message</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Write_Sampling_Message k p m &#8801; 
    EVENT Write_Sampling_MessageE [Port p, Message m] &#8883; k 
    WHERE
      is_src_sampport conf p
      &#8743; port_of_part conf p (&#180;cur (gsch conf k))
    THEN       
      &#180;schan := &#180;schan (ch_srcsampport conf p := Some m)      
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Read_Sampling_Message</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State) event&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Read_Sampling_Message k p &#8801; 
    EVENT Read_Sampling_MessageE [Port p] &#8883; k 
    WHERE
      is_dest_sampport conf p 
      &#8743; port_of_part conf p (&#180;cur (gsch conf k))
    THEN 
      SKIP
    END&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Core_Init_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Core_Init_RGCond  &#8801; RG[&#10627;True&#10628;,UNIV,Id,&#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Schedule_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Schedule_RGCond k &#8801; 
   (RG[&#10627;True&#10628;,
       &#10627;True&#10628;, 
       (&#10627;&#170;cur (c2s conf k) = (SOME p. (c2s conf) k &#8712;(p2s conf) p)
          &#8743; (&#8704;c. c&#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))&#10628; &#8746; Id),
       &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">id_belong</span><span class="delimiter">[</span><span class="">simp</span><span class="delimiter">]</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Id &#8838;&#10627;&#170;cur= &#186;cur&#10628;&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">Id_fstsnd_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Write_Sampling_Message_RGCond k p m &#8801; (
            RG[&#10627;True&#10628;,
               &#10627;&#170;cur (c2s conf k)= &#186;cur (c2s conf k)&#10628;, 
               (&#10627;&#170;cur= &#186;cur&#10628;),
               &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (State) rgformula&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Read_Sampling_Message_RGCond k p &#8801; 
     RG[&#10627;True&#10628;,
        &#10627;&#170;cur (c2s conf k)= &#186;cur (c2s conf k)&#10628;,
        (&#10627;&#170;cur= &#186;cur&#10628;),
        &#10627;True&#10628;]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Core_Init_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Core_Init_RGF k &#8801; (Core_Init k, Core_Init_RGCond)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Schedule_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Schedule_RGF k &#8801; (Schedule k, Schedule_RGCond k)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Write_Sampling_Message_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Write_Sampling_Message_RGF k p m &#8801; (Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Read_Sampling_Message_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State) rgformula_e&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Read_Sampling_Message_RGF k p  &#8801; (Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;EvtSys1_on_Core_RGF k &#8801; 
            (rgf_EvtSys ({Schedule_RGF k} &#8746;
                          (&#8899;(p, m). {Write_Sampling_Message_RGF k p m}) &#8746;
                          (&#8899;p.{Read_Sampling_Message_RGF k p})),
               RG[&#10627;True&#10628;,
                  &#10627;&#170;cur (c2s conf k)= &#186;cur (c2s conf k)&#10628;,
                  (&#10627;&#170;cur= &#186;cur &#8744; &#170;cur (c2s conf k) = (SOME p. (c2s conf) k &#8712;(p2s conf) p)
                                &#8743; (&#8704;c. c&#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))&#10628;),
                  &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">EvtSys_on_Core_RGF</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;Core &#8658; (EventLabel, Core, State) rgformula_es&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;EvtSys_on_Core_RGF k  &#8801; 
          (rgf_EvtSeq (Core_Init_RGF k) (EvtSys1_on_Core_RGF k),
           RG[&#10627;True&#10628;,
              &#10627;&#170;cur (c2s conf k)= &#186;cur (c2s conf k)&#10628;,
              (&#10627;&#170;cur= &#186;cur &#8744; &#170;cur (c2s conf k) = (SOME p. (c2s conf) k &#8712;(p2s conf) p)
                                &#8743; (&#8704;c. c&#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))&#10628;),
              &#10627;True&#10628;])&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Core, State) rgformula_par&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;ARINCXKernel_Spec &#8801; (&#955;k. EvtSys_on_Core_RGF k)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">consts</span><span class=""> </span><span class="">s0</span><span class="delimiter">::</span><span class="">State</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">s0_witness</span><span class="delimiter">::</span><span class="string">&quot;State&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;s0_witness &#8801; fst (System_Init conf)&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">specification</span><span class=""> </span><span class="delimiter">(</span><span class="">s0</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="">s0_init</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;s0 &#8801; fst (System_Init conf)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_coreinit</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;k1&#8800;k2 &#10233; Core_Init k1&#8800;Core_Init k2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_schedule</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;k1&#8800;k2 &#10233; Schedule k1&#8800;Schedule k2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_wrt_samp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(k1&#8800;k2 &#8744; p1&#8800;p2 &#8744; m1&#8800;m2) &#10233; Write_Sampling_Message k1 p1 m1 &#8800; Write_Sampling_Message k2 p2 m2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">clarsimp</span><span class="delimiter">,</span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_rd_samp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;(k1&#8800;k2 &#8744; p1&#8800;p2) &#10233; Read_Sampling_Message k1 p1 &#8800; Read_Sampling_Message k2 p2&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">clarsimp</span><span class="delimiter">,</span><span class=""> </span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_coreinit_sched</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Schedule k2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Write_Sampling_Message k2 p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Core_Init k1 &#8800; Read_Sampling_Message k2 p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Schedule k1 &#8800; Write_Sampling_Message k2 p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_def</span><span class=""> </span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Schedule k1 &#8800; Read_Sampling_Message k2 p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_def</span><span class=""> </span><span class="">Schedule_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;Write_Sampling_Message k1 p1 m &#8800; Read_Sampling_Message k2 p2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_def</span><span class=""> </span><span class="">Write_Sampling_Message_def</span><span class=""> </span><span class="">get_evt_label_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">evtrgfset</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;((EventLabel, Core, State) event &#215; (State rgformula)) set&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;evtrgfset &#8801; (&#8899;k.{(Core_Init k, Core_Init_RGCond)})
                  &#8746; (&#8899;k.{(Schedule k, Schedule_RGCond k)})
                  &#8746; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})
                  &#8746; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = evtrgfset&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">proof</span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (fst (ARINCXKernel_Spec k)))&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">all_evts_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (fst (EvtSys_on_Core_RGF k)))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. all_evts_es (rgf_EvtSeq (Core_Init_RGF k) (EvtSys1_on_Core_RGF k)))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {Core_Init_RGF k} &#8746; (all_evts_es (fst (EvtSys1_on_Core_RGF k))))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {Core_Init_RGF k} &#8746;
                                                  ({Schedule_RGF k} &#8746;
                                                  (&#8899;(p, m). {Write_Sampling_Message_RGF k p m}) &#8746;
                                                  (&#8899;p.{Read_Sampling_Message_RGF k p}))
                                             )&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;all_evts ARINCXKernel_Spec = (&#8899;k. {(Core_Init k, Core_Init_RGCond)} &#8746;
                                                  {(Schedule k, Schedule_RGCond k)} &#8746;
                                                  (&#8899;(p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)}) &#8746;
                                                  (&#8899;p.{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})
                                             )&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">moreover</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;(&#8899;k. {(Core_Init k, Core_Init_RGCond)} &#8746;
                {(Schedule k, Schedule_RGCond k)} &#8746;
                (&#8899;(p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)}) &#8746;
                (&#8899;p.{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})
           ) = 
           (&#8899;k. {(Core_Init k, Core_Init_RGCond)}) &#8746;
           (&#8899;k. {(Schedule k, Schedule_RGCond k)}) &#8746;
           (&#8899;k. (&#8899;(p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})) &#8746;
           (&#8899;k. (&#8899;p.{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)}))&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1">moreover</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;(&#8899;k. (&#8899;(p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)}))
          = (&#8899;(k, p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1">moreover</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;(&#8899;k. (&#8899;p.{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)}))
          = (&#8899;(k,p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">    </span><span class="keyword1">ultimately</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1">qed</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Core, State) event &#8658; (State rgformula) option&quot;</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;evtrgffun &#8801; (&#955;e. Some (SOME rg. (e, rg)&#8712;evtrgfset))&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;e&#8712;Domain evtrgfset. &#8707;ef&#8712;evtrgfset. E<span class="hidden">&#8681;</span><sub>e</sub> ef = e &#8743; evtrgffun e = Some (snd ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">evtrgffun_def</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">someI_ex</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef1 ef2. ef1&#8712;evtrgfset &#8743; ef2&#8712;evtrgfset &#8743; ef1&#8800;ef2 &#10230; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef2&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1&#8712;(&#8899;k.{(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_sched</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k.{(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_sched</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;k.{(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_sched</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k.{(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_schedule</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k.{(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_sched_wrtsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_wrt_samp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef1 &#8712; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_coreinit_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;k.{(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_sched_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p, m).{(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_wrtsamp_rdsamp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;ef2 &#8712; (&#8899;(k, p).{(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">neq_rd_samp</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">hide_lams</span><span class="delimiter">)</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">evtrgfset_func</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1">proof</span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1">{</span><span class="">
</span><span class="">    </span><span class="keyword3">fix</span><span class=""> </span><span class="">ef</span><span class="">
</span><span class="">    </span><span class="keyword3">assume</span><span class=""> </span><span class="">a0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;evtrgfset&quot;</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&#8712;Domain evtrgfset&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">Domain_iff</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">surjective_pairing</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">obtain</span><span class=""> </span><span class="">ef1</span><span class=""> </span><span class="keyword2">where</span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8712;evtrgfset &#8743; E<span class="hidden">&#8681;</span><sub>e</sub> ef1 = E<span class="hidden">&#8681;</span><sub>e</sub> ef &#8743; evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef1)&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgffun_exist</span><span class="delimiter">[</span><span class="">rule_format</span><span class="delimiter">,</span><span class="">of</span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class="delimiter">]</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> ef) = Some (snd ef)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">proof</span><span class="delimiter">(</span><span class="">cases</span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">        </span><span class="keyword3">assume</span><span class=""> </span><span class="string">&quot;ef1 = ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1">with</span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1">next</span><span class="">
</span><span class="">        </span><span class="keyword3">assume</span><span class=""> </span><span class="">b0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef1&#8800;ef&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1">with</span><span class=""> </span><span class="">diff_e_in_evtrgfset</span><span class=""> </span><span class="">a0</span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;E<span class="hidden">&#8681;</span><sub>e</sub> ef1 &#8800; E<span class="hidden">&#8681;</span><sub>e</sub> ef&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">        </span><span class="keyword1">with</span><span class=""> </span><span class="">a1</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">      </span><span class="keyword1">qed</span><span class="">
</span><span class="">  </span><span class="keyword1">}</span><span class="">
</span><span class="">  </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1">qed</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. ef&#8712;all_evts_es (fst (ARINCXKernel_Spec k)) &#10230; is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">proof</span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">  </span><span class="keyword1">{</span><span class="">
</span><span class="">    </span><span class="keyword3">fix</span><span class=""> </span><span class="">k</span><span class="">
</span><span class="">    </span><span class="keyword3">assume</span><span class=""> </span><span class="">p0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (ARINCXKernel_Spec k))&quot;</span><span class=""> 
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (EvtSys_on_Core_RGF k))&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;ef&#8712;insert (Core_Init_RGF k) (all_evts_es (fst (EvtSys1_on_Core_RGF k)))&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;ef = (Core_Init_RGF k) &#8744; ef&#8712;all_evts_es (fst (EvtSys1_on_Core_RGF k))&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">proof</span><span class="">
</span><span class="">        </span><span class="keyword3">assume</span><span class=""> </span><span class="">a0</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef = Core_Init_RGF k&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> 
</span><span class="">          </span><span class="keyword1">using</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">is_basicevt.simps</span><span class="delimiter">(</span><span class="">2</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">      </span><span class="keyword1">next</span><span class="">
</span><span class="">        </span><span class="keyword3">assume</span><span class=""> </span><span class="">a1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;ef&#8712;all_evts_es (fst (EvtSys1_on_Core_RGF k))&quot;</span><span class="">
</span><span class="">        </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;ef&#8712;{Schedule_RGF k} &#8746;
                      {ef. &#8707;p m. ef = Write_Sampling_Message_RGF k p m} &#8746;
                      {ef. &#8707;p. ef = Read_Sampling_Message_RGF k p}&quot;</span><span class=""> 
</span><span class="">          </span><span class="keyword1">using</span><span class=""> </span><span class="">all_evts_es_esys</span><span class=""> </span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">        </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;ef&#8712;{Schedule_RGF k} 
                  &#8744; ef&#8712;{ef. &#8707;p m. ef = Write_Sampling_Message_RGF k p m} 
                  &#8744; ef&#8712;{ef. &#8707;p. ef = Read_Sampling_Message_RGF k p}&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">        </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class="">
</span><span class="">          </span><span class="keyword1">proof</span><span class="">
</span><span class="">            </span><span class="keyword3">assume</span><span class=""> </span><span class="string">&quot;ef&#8712;{Schedule_RGF k}&quot;</span><span class="">
</span><span class="">            </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">          </span><span class="keyword1">next</span><span class="">
</span><span class="">            </span><span class="keyword3">assume</span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p m. ef = Write_Sampling_Message_RGF k p m}
                    &#8744; ef&#8712;{ef. &#8707;p. ef = Read_Sampling_Message_RGF k p}&quot;</span><span class="">
</span><span class="">            </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> 
</span><span class="">              </span><span class="keyword1">proof</span><span class="">
</span><span class="">                </span><span class="keyword3">assume</span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p m. ef = Write_Sampling_Message_RGF k p m}&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;&#8707;p m. ef = Write_Sampling_Message_RGF k p m&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">obtain</span><span class=""> </span><span class="">p</span><span class=""> </span><span class="keyword2">and</span><span class=""> </span><span class="">m</span><span class=""> </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;ef = Write_Sampling_Message_RGF k p m&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">              </span><span class="keyword1">next</span><span class="">
</span><span class="">                </span><span class="keyword3">assume</span><span class=""> </span><span class="string">&quot;ef&#8712;{ef. &#8707;p. ef = Read_Sampling_Message_RGF k p}&quot;</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;&#8707;p. ef = Read_Sampling_Message_RGF k p&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">obtain</span><span class=""> </span><span class="">p</span><span class=""> </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;ef = Read_Sampling_Message_RGF k p&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">                </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">              </span><span class="keyword1">qed</span><span class="">
</span><span class="">          </span><span class="keyword1">qed</span><span class="">
</span><span class="">      </span><span class="keyword1">qed</span><span class="">
</span><span class="">  </span><span class="keyword1">}</span><span class="">
</span><span class="">  </span><span class="keyword1">then</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1">qed</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">all_basic_evts_arinc</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;all_evts ARINCXKernel_Spec. is_basicevt (E<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">all_evts_def</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class="delimiter">]</span><span class=""> </span><span class="">all_basic_evts_arinc_help</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;erg&#8712;all_evts (ARINCXKernel_Spec). (evtrgffun (E<span class="hidden">&#8681;</span><sub>e</sub> erg))  = Some (snd erg)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">evtrgfset_func</span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1">definition</span><span class=""> </span><span class="">Evt_sat_RG</span><span class="delimiter">::</span><span class=""> </span><span class="string">&quot;(EventLabel, Core, State) event &#8658; (State) rgformula &#8658; bool&quot;</span><span class=""> </span><span class="delimiter">(</span><span class="string">&quot;(_&#8866;_)&quot;</span><span class=""> </span><span class="delimiter">[</span><span class="">60</span><span class="delimiter">,</span><span class="">60</span><span class="delimiter">]</span><span class=""> </span><span class="">61</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword2">where</span><span class=""> </span><span class="string">&quot;Evt_sat_RG e rg &#8801; &#8866; e sat<span class="hidden">&#8681;</span><sub>e</sub> [Pre<span class="hidden">&#8681;</span><sub>f</sub> rg, Rely<span class="hidden">&#8681;</span><sub>f</sub> rg, Guar<span class="hidden">&#8681;</span><sub>f</sub> rg, Post<span class="hidden">&#8681;</span><sub>f</sub> rg]&quot;</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Core_Init_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. Core_Init k &#8866; Core_Init_RGCond&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">done</span></span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Sched_SatRG_help1</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;{(s, t). t = s&#10631;cur := (cur s)(c2s conf k := SOME p. c2s conf k &#8712; p2s conf p)&#10632;}
         &#8838; &#10627;(&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur (c2s conf c))&#10628;&quot;</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">inj_surj_c2s</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">case_prod_beta&#39;</span><span class=""> </span><span class="">inj_eq</span><span class="delimiter">)</span><span class=""> 
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Sched_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k. Schedule k &#8866; Schedule_RGCond k&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">guard_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">using</span><span class=""> </span><span class="">Sched_SatRG_help1</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">fastforce</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Write_Sampling_Message_SatRG_help</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;{(s, t). s &#8712; pre_rgf (RG[UNIV,&#10627;&#170;cur (c2s conf k) = &#186;cur (c2s conf k)&#10628;,&#10627;&#170;cur = &#186;cur&#10628;,UNIV]) 
          &#8743; is_src_sampport conf p &#8743; port_of_part conf p (cur s (gsch conf k)) 
          &#8743; t = s&#10631;schan := schan s(ch_srcsampport conf p &#8614; m)&#10632;} 
   &#8838; guar_rgf (RG[UNIV,&#10627;&#170;cur (c2s conf k) = &#186;cur (c2s conf k)&#10628;,&#10627;&#170;cur = &#186;cur&#10628;,UNIV])&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">proof</span><span class=""> </span><span class="">-</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;{(s, t). s &#8712; UNIV &#8743; is_src_sampport conf p &#8743; port_of_part conf p (cur s (gsch conf k)) 
          &#8743; t = s&#10631;schan := schan s(ch_srcsampport conf p &#8614; m)&#10632;} 
          &#8838; (&#10627;&#170;cur = &#186;cur&#10628; &#8746; Id)&quot;</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">    </span><span class="keyword1">moreover</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;pre_rgf (RG[UNIV,&#10627;&#170;cur (c2s conf k) = &#186;cur (c2s conf k)&#10628;,&#10627;&#170;cur = &#186;cur&#10628;,UNIV]) = UNIV&quot;</span><span class=""> 
</span><span class="">      </span><span class="keyword1">using</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">1</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1">moreover</span><span class="">
</span><span class="">    </span><span class="keyword1">have</span><span class=""> </span><span class="string">&quot;guar_rgf (RG[UNIV,&#10627;&#170;cur (c2s conf k) = &#186;cur (c2s conf k)&#10628;,&#10627;&#170;cur = &#186;cur&#10628;,UNIV]) = (&#10627;&#170;cur = &#186;cur&#10628;)&quot;</span><span class="">
</span><span class="">      </span><span class="keyword1">using</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class="delimiter">)</span><span class=""> 
</span><span class="">    </span><span class="keyword1">ultimately</span><span class=""> </span><span class="keyword3">show</span><span class=""> </span><span class="var">?thesis</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">  </span><span class="keyword1">qed</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Write_Sampling_Message_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8704;k p m. Write_Sampling_Message k p m &#8866; Write_Sampling_Message_RGCond k p m&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">guard_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">Write_Sampling_Message_SatRG_help</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">fastforce</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">gsch_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">Read_Sampling_Message_SatRG</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;k p. Read_Sampling_Message k p &#8866; Read_Sampling_Message_RGCond k p&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Evt_sat_RG_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">BasicEvt</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">body_def</span><span class=""> </span><span class="">guard_def</span><span class=""> </span><span class="">Skip_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">Basic</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class=""> </span><span class="">gsch_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">EvtSys1_on_core_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8704;k. &#8866; fst (EvtSys1_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSys_h</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">Sched_SatRG</span><span class=""> </span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">Write_Sampling_Message_SatRG</span><span class=""> </span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Abs_unit_cases</span><span class=""> </span><span class="">empty_iff</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">Read_Sampling_Message_SatRG</span><span class=""> </span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> 
</span><span class="">    </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">snd_conv</span><span class=""> </span><span class="">fst_conv</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">smt</span><span class=""> </span><span class="">Abs_unit_cases</span><span class=""> </span><span class="">empty_iff</span><span class=""> </span><span class="">singletonD</span><span class="delimiter">)</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">clarify</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a,b)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712; {(Schedule_RGF k)}&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGF_def</span><span class=""> </span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Write_Sampling_Message_RGF k p m})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(aa,ba)&#8712;(&#8899;p. {Read_Sampling_Message_RGF k p})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGF_def</span><span class=""> </span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">EvtSys_on_core_SatRG</span><span class="delimiter">:</span><span class=""> 
</span><span class="">  </span><span class="string">&quot;&#8704;k. &#8866; fst (EvtSys_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k))]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">EvtSeq_h</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">Core_Init_SatRG</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Evt_sat_RG_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">EvtSys1_on_core_SatRG</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">id_belong</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">EvtSys1_on_Core_RGF_def</span><span class=""> </span><span class="">Core_Init_RGF_def</span><span class=""> </span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">spec_sat_rg</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8866; ARINCXKernel_Spec SAT [{s0}, {}, UNIV, UNIV]&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">ParallelESys</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1">using</span><span class=""> </span><span class="">EvtSys_on_core_SatRG</span><span class="">
</span><span class="">    </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> </span><span class="">Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">simp</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">ARINCXKernel_Spec_def</span><span class=""> </span><span class="">EvtSys_on_Core_RGF_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class=""> </span><span class="">Collect_mono</span><span class=""> </span><span class="">Id_fstsnd_eq</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">simp</span><span class="delimiter">+</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">done</span></span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">init_sat_inv</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;{s0}&#8838;cur_part&quot;</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">s0_init</span><span class=""> </span><span class="">System_Init_def</span><span class=""> </span><span class="">cur_part_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="">UNIV_I</span><span class=""> </span><span class="">exE_some</span><span class=""> </span><span class="">imageE</span><span class=""> </span><span class="">surj_p2c</span><span class="delimiter">)</span><span class="">
</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">stb_guar_sched</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable cur_part ((&#10627;&#170;cur (c2s conf x) = (SOME p. c2s conf x &#8712; p2s conf p) &#8743;
                         (&#8704;c. c &#8800; x &#10230; &#170;cur (c2s conf c) = &#186;cur (c2s conf c))&#10628;)&#8746;Id)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">cur_part_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">conjI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">impI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">rule</span><span class=""> </span><span class="">allI</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="delimiter">(</span><span class="">metis</span><span class=""> </span><span class="delimiter">(</span><span class="">no_types</span><span class="delimiter">,</span><span class=""> </span><span class="">lifting</span><span class="delimiter">)</span><span class=""> </span><span class="">UNIV_I</span><span class=""> </span><span class="">imageE</span><span class=""> </span><span class="">inj_surj_c2s</span><span class=""> </span><span class="">someI2_ex</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">stb_guar_wrtsamp</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;stable cur_part (&#10627;&#170;cur= &#186;cur&#10628;)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">stable_def</span><span class=""> </span><span class="">cur_part_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  
</span><span class="keyword1">lemma</span><span class=""> </span><span class="">evts_stb_invar</span><span class="delimiter">:</span><span class=""> </span><span class="string">&quot;&#8704;ef&#8712;evtrgfset. stable cur_part (Guar<span class="hidden">&#8681;</span><sub>e</sub> ef)&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">unfolding</span><span class=""> </span><span class="">evtrgfset_def</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">clarify</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(Core_Init k, Core_Init_RGCond)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Core_Init_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class=""> </span><span class="">stable_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;k. {(Schedule k, Schedule_RGCond k)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Schedule_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">stb_guar_sched</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;(k, p, m). {(Write_Sampling_Message k p m, Write_Sampling_Message_RGCond k p m)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Write_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class=""> 
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">stb_guar_wrtsamp</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">case_tac</span><span class=""> </span><span class="string">&quot;(a, b) &#8712; (&#8899;(k, p). {(Read_Sampling_Message k p, Read_Sampling_Message_RGCond k p)})&quot;</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1"><span class="improper">apply</span></span><span class="delimiter">(</span><span class="">simp</span><span class=""> </span><span class="">add</span><span class="delimiter">:</span><span class="">Read_Sampling_Message_RGCond_def</span><span class=""> </span><span class="">Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class=""> </span><span class="">getrgformula_def</span><span class="delimiter">)</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">stb_guar_wrtsamp</span><span class=""> </span><span class="">rgformula.select_convs</span><span class="delimiter">(</span><span class="">3</span><span class="delimiter">)</span><span class=""> </span><span class="keyword1"><span class="improper">apply</span></span><span class=""> </span><span class="">auto</span><span class="delimiter">[</span><span class="">1</span><span class="delimiter">]</span><span class=""> 
</span><span class="">  </span><span class="keyword1">by</span><span class=""> </span><span class="">blast</span><span class="">
</span><span class="">
</span><span class="keyword1">theorem</span><span class=""> </span><span class="">ARINC_invariant_theorem</span><span class="delimiter">:</span><span class="">
</span><span class="">  </span><span class="string">&quot;invariant_of_pares (paresys_spec ARINCXKernel_Spec) {s0} cur_part&quot;</span><span class="">
</span><span class="">  </span><span class="keyword1">using</span><span class=""> </span><span class="">invariant_theorem</span><span class="delimiter">[</span><span class="">of</span><span class=""> </span><span class="">ARINCXKernel_Spec</span><span class=""> </span><span class="string">&quot;{s0}&quot;</span><span class=""> </span><span class="">evtrgffun</span><span class=""> </span><span class="">cur_part</span><span class="delimiter">]</span><span class="">
</span><span class="">    </span><span class="">spec_sat_rg</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">evtrgfset_eq_allevts_ARINCSpec</span><span class=""> 
</span><span class="">    </span><span class="">all_basic_evts_arinc</span><span class=""> </span><span class="">evts_stb_invar</span><span class=""> </span><span class="">init_sat_inv</span><span class=""> </span><span class="">bsc_evts_rgfs</span><span class=""> </span><span class="keyword1">by</span><span class=""> </span><span class="">auto</span><span class="">
</span><span class="">
</span><span class="keyword2">end</span></pre>

</div>
</body>
</html>
