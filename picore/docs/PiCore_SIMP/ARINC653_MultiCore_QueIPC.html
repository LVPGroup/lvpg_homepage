<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Theory ARINC653_MultiCore_QueIPC (Isabelle2018: August 2018)</title>
<link media="all" rel="stylesheet" type="text/css" href="isabelle.css"/>
</head>

<body>
<div class="head"><h1>Theory ARINC653_MultiCore_QueIPC</h1>

<span class="command">theory</span> <span class="name">ARINC653_MultiCore_QueIPC</span><br/>
<span class="keyword">imports</span> <a href="picore_SIMP_lemma.html"><span class="name">picore_SIMP_lemma</span></a><br/>

</div>
<div class="source">
<pre class="source"><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
Created by Yongwang Zhao (zhaoyongwang@gmail.com, zhaoyw@buaa.edu.cn)
School of Computer Science &amp; Engineering, Beihang University, China
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">section</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Formal Specification and Reasoning of ARINC653 Multicore Microkernel&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">theory</span></span><span> </span><span>ARINC653_MultiCore_QueIPC</span><span>
</span><span class="keyword2"><span class="keyword">imports</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;../../Adapter_SIMP/picore_SIMP_lemma&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">begin</span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;functional specification&#8250;</span></span></span><span>
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>Part</span><span>
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>Sched</span><span>
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>Message</span><span> 
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>Port</span><span>
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>Core</span><span>
</span><span>
</span><span class="keyword1"><span class="command">typedecl</span></span><span> </span><span>QChannel</span><span>
</span><span>
</span><span class="keyword1"><span class="command">record</span></span><span> </span><span>Config</span><span> </span><span class="delimiter">=</span><span> </span><span>c2s</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Sched&quot;</span></span></span><span>
</span><span>                </span><span>p2s</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Part &#8658; Sched&quot;</span></span></span><span>
</span><span>                </span><span>p2p</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Port &#8658; Part&quot;</span></span></span><span>
</span><span>                </span><span>chsrc</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;QChannel &#8658; Port&quot;</span></span></span><span>
</span><span>                </span><span>chdest</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;QChannel &#8658; Port&quot;</span></span></span><span>  
</span><span>                </span><span>chmax</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;QChannel &#8658; nat&quot;</span></span></span><span>
</span><span>  
</span><span class="keyword1"><span class="command">axiomatization</span></span><span> </span><span>conf</span><span class="delimiter">::</span><span>Config</span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>bij_c2s</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;bij (c2s conf)&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>portsrc_disj</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;c1 c2. c1 &#8800; c2 &#10230; (chsrc conf) c1 &#8800; (chsrc conf) c2&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>portdest_disj</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;c1 c2. c1 &#8800; c2 &#10230; (chdest conf) c1 &#8800; (chdest conf) c2&quot;</span></span></span><span> 
</span><span>    </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>portsrcdest_disj</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;c1 c2. (chsrc conf) c1 &#8800; (chdest conf) c2&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>inj_surj_c2s</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;inj (c2s conf) &#8743; surj (c2s conf)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>bij_c2s</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>bij_def</span><span class="delimiter">)</span><span> 
</span><span>
</span><span class="comment"><span class="delete"><span class="delete"><span class="delete"><span class="delete">(*
definition gsch :: &quot;Config &#8658; Core &#8658; Sched&quot;
  where &quot;gsch cfg k &#8801; (c2s cfg) k&quot;
*)</span></span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>is_src_qport</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Config &#8658; Port &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;is_src_qport sc p &#8801; (p&#8712;range (chsrc sc))&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>is_dest_qport</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Config &#8658; Port &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;is_dest_qport sc p &#8801; (p&#8712;range (chdest sc))&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>port_of_part</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Config &#8658; Port &#8658; Part &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;port_of_part sc po pa &#8801; ((p2p sc) po = pa)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>ch_srcqport</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Config &#8658; Port &#8658; QChannel&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ch_srcqport sc p &#8801; SOME c. (chsrc sc) c = p&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">datatype</span></span><span> </span><span>PartMode</span><span> </span><span class="delimiter">=</span><span> </span><span>IDLE</span><span> </span><span class="delimiter">|</span><span> </span><span>READY</span><span> </span><span class="delimiter">|</span><span> </span><span>RUN</span><span>
</span><span>
</span><span class="keyword1"><span class="command">record</span></span><span> </span><span>State</span><span> </span><span class="delimiter">=</span><span> </span><span>cur</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Sched &#8658; Part option&quot;</span></span></span><span>
</span><span>               </span><span>qbuf</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;QChannel &#8658; Message list&quot;</span></span></span><span>
</span><span>               </span><span>qbufsize</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;QChannel &#8658; nat&quot;</span></span></span><span>
</span><span>               </span><span>partst</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Part &#8658; PartMode&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">datatype</span></span><span> </span><span>EL</span><span> </span><span class="delimiter">=</span><span> </span><span>Core_InitE</span><span> </span><span class="delimiter">|</span><span> </span><span>ScheduleE</span><span> </span><span class="delimiter">|</span><span> </span><span>Send_Que_MessageE</span><span> </span><span class="delimiter">|</span><span>  </span><span>Recv_Que_MessageE</span><span>
</span><span>
</span><span class="keyword1"><span class="command">datatype</span></span><span> </span><span>parameter</span><span> </span><span class="delimiter">=</span><span> </span><span>Port</span><span> </span><span>Port</span><span> </span><span class="delimiter">|</span><span> </span><span>Message</span><span> </span><span>Message</span><span> </span><span class="delimiter">|</span><span> </span><span>Partition</span><span> </span><span>Part</span><span>
</span><span>
</span><span class="keyword1"><span class="command">type_synonym</span></span><span> </span><span>EventLabel</span><span> </span><span class="delimiter">=</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;EL &#215; (parameter list &#215; Core)&quot;</span></span></span><span> 
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>get_evt_label</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;EL &#8658; parameter list &#8658; Core &#8658; EventLabel&quot;</span></span></span><span> </span><span class="delimiter">(</span><span class="string"><span class="delete"><span class="delete">&quot;_ _ @ _&quot;</span></span></span><span> </span><span class="delimiter">[</span><span>0</span><span class="delimiter">,</span><span>0</span><span class="delimiter">,</span><span>0</span><span class="delimiter">]</span><span> </span><span>20</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;get_evt_label el ps k &#8801; (el,(ps,k))&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Core_Init</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; (EventLabel, Core, State, State com option) event&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core_Init k&#8801; 
    EVENT Core_InitE [] @ k 
    THEN 
      &#180;partst := (&#955;p. if p2s conf p = c2s conf k &#8743; &#180;partst p = IDLE 
                      then READY else &#180;partst p)
    END&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>System_Init</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Config &#8658; (State &#215; (EventLabel, Core, State, State com option) x)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;System_Init cfg &#8801; (&#10631;cur=(&#955;c. None ),
                            qbuf = (&#955;c. []),
                            qbufsize = (&#955;c. 0),
                            partst = (&#955;p. IDLE)&#10632;, 
                            (&#955;k. Core_Init k))&quot;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Schedule</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Part &#8658; (EventLabel, Core, State, State com option) event&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Schedule k p &#8801; 
    EVENT ScheduleE [Partition p] @ k 
    WHEN
      p2s conf p = c2s conf k
      &#8743; (&#180;partst p &#8800; IDLE)
      &#8743; (&#180;cur((c2s conf) k) = None 
          &#8744; p2s conf (the (&#180;cur((c2s conf) k))) = c2s conf k)
    THEN 
      IF (&#180;cur((c2s conf) k) &#8800; None) THEN 
        ATOMIC
          &#180;partst := &#180;partst(the (&#180;cur ((c2s conf) k)) := READY);;
          &#180;cur := &#180;cur((c2s conf) k := None)
        END
      FI;;
      
      ATOMIC
        &#180;cur := &#180;cur((c2s conf) k := Some p);;
        &#180;partst := &#180;partst(p := RUN)
      END

    END&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Send_Que_Message</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State, State com option) event&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Send_Que_Message k p m &#8801; 
    EVENT Send_Que_MessageE [Port p, Message m] @ k 
    WHEN
      is_src_qport conf p
      &#8743; &#180;cur ((c2s conf) k) &#8800; None
      &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))
    THEN
      AWAIT &#180;qbufsize (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p) THEN 
        &#180;qbuf := &#180;qbuf (ch_srcqport conf p := &#180;qbuf (ch_srcqport conf p) @ [m]);;
        &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) + 1)
      END
    END&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Recv_Que_Message</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State, State com option) event&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Recv_Que_Message k p &#8801; 
    EVENT Recv_Que_MessageE [Port p] @ k 
    WHEN
      is_dest_qport conf p 
      &#8743; &#180;cur ((c2s conf) k) &#8800; None
      &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))
    THEN 
      AWAIT &#180;qbufsize (ch_srcqport conf p) &gt; 0 THEN 
        &#180;qbuf := &#180;qbuf (ch_srcqport conf p := tl (&#180;qbuf (ch_srcqport conf p)));;
        &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) - 1)
      END
    END&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Rely-guarantee condition of events&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;core_init_pre k &#8801; &#10627;&#8704;p. p2s conf p = c2s conf k &#10230; &#180;partst p = IDLE&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;core_init_rely k &#8801; &#10627;(&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst p = &#186;partst p)&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;core_init_guar k &#8801; &#10627;&#170;cur= &#186;cur &#8743; &#170;qbuf= &#186;qbuf &#8743; &#170;qbufsize= &#186;qbufsize 
            &#8743; (&#8704;p. p2s conf p = c2s conf k &#10230; &#186;partst p = IDLE &#8743; &#170;partst p = READY)
            &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p)&#10628; &#8746; Id&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;core_init_post &#8801; &#10627;True&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Core_Init_RGCond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; (State) PiCore_Hoare.rgformula&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core_Init_RGCond k &#8801; RG[core_init_pre k, core_init_rely k, core_init_guar k, core_init_post]&quot;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;schedule_pre &#8801; &#10627;True&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;schedule_rely k &#8801; 
  &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k) &#8743;
        (&#8704;p. p2s conf p = c2s conf k &#10230; &#170;partst  p = &#186;partst p)&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;schedule_guar k p &#8801; 
  &#10627;(&#170;cur = &#186;cur(c2s conf k := Some p) 
          &#8743; &#170;partst = &#186;partst(the (&#170;cur(c2s conf k)) := RUN) 
          &#8743; p2s conf p = c2s conf k
             &#8744; (&#170;cur = &#186;cur(c2s conf k := None) 
                &#8743; &#170;partst = &#186;partst(the (&#186;cur (c2s conf k)) := READY)))
          &#8743; (&#8704;c. c &#8800; k &#10230; &#170;cur (c2s conf c) = &#186;cur  (c2s conf c))
          &#8743; (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#170;partst  p = &#186;partst p )
          &#8743; &#170;qbuf= &#186;qbuf 
          &#8743; &#170;qbufsize= &#186;qbufsize&#10628; &#8746; Id&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;schedule_post &#8801; &#10627;True&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Schedule_RGCond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Part &#8658; (State) PiCore_Hoare.rgformula&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Schedule_RGCond k p &#8801; RG[schedule_pre, schedule_rely k, schedule_guar k p, schedule_post]&quot;</span></span></span><span>
</span><span>
</span><span>  
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;snd_recv_pre &#8801; &#10627;True&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;snd_recv_rely k &#8801; &#10627;&#170;cur (c2s conf k) = &#186;cur  (c2s conf k)&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;snd_recv_guar p &#8801; 
  &#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
    (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p))
      &#10230; &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
    (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
    (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">abbreviation</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;snd_recv_post &#8801; &#10627;True&#10628;&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Send_Que_Message_RGCond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; Message &#8658; (State) PiCore_Hoare.rgformula&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Send_Que_Message_RGCond k p m &#8801; RG[snd_recv_pre, snd_recv_rely k, snd_recv_guar p, snd_recv_post]&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Recv_Que_Message_RGCond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; (State) PiCore_Hoare.rgformula&quot;</span></span></span><span>
</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Recv_Que_Message_RGCond k p &#8801; RG[snd_recv_pre, snd_recv_rely k, snd_recv_guar p, snd_recv_post]&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Core_Init_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; (EventLabel, Core, State, State com option) rgformula_e&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core_Init_RGF k &#8801; (Core_Init k, Core_Init_RGCond k)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Schedule_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Part &#8658; (EventLabel, Core, State, State com option) rgformula_e&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Schedule_RGF k p &#8801; (Schedule k p, Schedule_RGCond k p)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Send_Que_Message_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; Message &#8658; (EventLabel, Core, State, State com option) rgformula_e&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Send_Que_Message_RGF k p m &#8801; (Send_Que_Message k p m, Send_Que_Message_RGCond k p m)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>Recv_Que_Message_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; Port &#8658; (EventLabel, Core, State, State com option) rgformula_e&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Recv_Que_Message_RGF k p  &#8801; (Recv_Que_Message k p, Recv_Que_Message_RGCond k p)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>EvtSys1_on_Core_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; (EventLabel, Core, State, State com option) rgformula_es&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;EvtSys1_on_Core_RGF k &#8801; 
            (rgf_EvtSys (&#8899;p.{Schedule_RGF k p} &#8746;
                          (&#8899;(p, m). {Send_Que_Message_RGF k p m}) &#8746;
                          (&#8899;p.{Recv_Que_Message_RGF k p})),
               RG[&#10627;True&#10628;,
                  schedule_rely k,
                  ((&#8899;p. schedule_guar k p) &#8746; (&#8899;p. snd_recv_guar p) &#8746; Id),
                  &#10627;True&#10628;])&quot;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>EvtSys_on_Core_RGF</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Core &#8658; (EventLabel, Core, State, State com option) rgformula_es&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;EvtSys_on_Core_RGF k  &#8801; 
          (rgf_EvtSeq (Core_Init_RGF k) (EvtSys1_on_Core_RGF k),
           RG[core_init_pre k,
              schedule_rely k,
              ((&#8899;p. schedule_guar k p) &#8746; (&#8899;p. snd_recv_guar p) &#8746; Id &#8746; (core_init_guar k)),
              &#10627;True&#10628;])&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>ARINCXKernel_Spec</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(EventLabel, Core, State, State com option) rgformula_par&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;ARINCXKernel_Spec &#8801; (&#955;k. EvtSys_on_Core_RGF k)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">consts</span></span><span> </span><span>s0</span><span class="delimiter">::</span><span>State</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>s0_witness</span><span class="delimiter">::</span><span class="string"><span class="delete"><span class="delete">&quot;State&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s0_witness &#8801; fst (System_Init conf)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">specification</span></span><span> </span><span class="delimiter">(</span><span>s0</span><span class="delimiter">)</span><span> 
</span><span>  </span><span>s0_init</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;s0 &#8801; fst (System_Init conf)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Functional correctness by rely guarantee proof&#8250;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Core_Init_SatRG</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;k. &#915; (Core_Init k) &#8866; Core_Init_RGCond k&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Evt_sat_RG_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BasicEvt</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>body_def</span><span> </span><span>Core_Init_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>                  </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>guard_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj_surj_c2s</span><span> </span><span>injI</span><span> </span><span>surj_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>inj_eq</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>                  </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span> </span><span>guard_def</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_RGCond_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Sched_SatRG_h2</span><span class="delimiter">:</span><span> 
</span><span>   </span><span class="string"><span class="delete"><span class="delete">&quot;&#8866;<span class="hidden">&#8681;</span><sub>I</sub> Some (&#180;cur := &#180;cur(c2s conf k &#8614; p);;
       &#180;partst := &#180;partst (p := RUN)) 
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;p2s conf p = c2s conf k &#8743; &#180;cur (c2s conf k) = None&#10628; &#8745; {V}, 
          {(s, t). s = t}, UNIV, 
          &#10627;(&#180;cur = cur V(c2s conf k &#8614; p) &#8743;
             &#180;partst = (partst V)(the (&#180;cur (c2s conf k)) := RUN) &#8743;
             p2s conf p = c2s conf k &#8744;
             &#180;cur = (cur V)(c2s conf k := None) &#8743;
             &#180;partst = (partst V)(the (cur V (c2s conf k)) := READY)) &#8743;
            (&#8704;c. c &#8800; k &#10230; &#180;cur (c2s conf c) = cur V (c2s conf c)) &#8743;
            (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#180;partst p = partst V p) &#8743;
            &#180;qbuf = qbuf V &#8743; &#180;qbufsize = qbufsize V &#8744;
            &#180;((=) V)&#10628;]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p2s conf p = c2s conf k &#8743; (cur V) (c2s conf k) = None&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{s. s = V &#10631; cur := (cur V) (c2s conf k := Some p)&#10632;}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span> 
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>disjI1</span><span class="delimiter">)</span><span> 
</span><span>        </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj_surj_c2s</span><span> </span><span>injI</span><span> </span><span>surj_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>inj_eq</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Sched_SatRG_h1</span><span class="delimiter">:</span><span>
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8866;<span class="hidden">&#8681;</span><sub>I</sub> Some (&#180;partst := &#180;partst(the (&#180;cur (c2s conf k)) := READY);;
       &#180;cur := &#180;cur (c2s conf k := None)) 
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;p2s conf p = c2s conf k &#8743; &#180;partst p &#8800; IDLE &#8743; (&#180;cur (c2s conf k) = None 
            &#8744; p2s conf (the (&#180;cur (c2s conf k))) = c2s conf k)&#10628; &#8745;
                &#10627;&#8707;y. &#180;cur (c2s conf k) = Some y&#10628; &#8745; {V}, 
           {(s, t). s = t}, UNIV, 
           &#10627;(&#180;cur = cur V(c2s conf k &#8614; p) &#8743;
               &#180;partst = (partst V)(the (&#180;cur (c2s conf k)) := RUN) &#8743;
               p2s conf p = c2s conf k &#8744;
               &#180;cur = (cur V)(c2s conf k := None) &#8743;
               &#180;partst = (partst V)(the (cur V (c2s conf k)) := READY)) &#8743;
              (&#8704;c. c &#8800; k &#10230; &#180;cur (c2s conf c) = cur V (c2s conf c)) &#8743;
              (&#8704;c p. c &#8800; k &#8743; p2s conf p = c2s conf c &#10230; &#180;partst p = partst V p) &#8743;
              &#180;qbuf = qbuf V &#8743; &#180;qbufsize = qbufsize V &#8744;
              &#180;((=) V)&#10628; &#8745;
             &#10627;p2s conf p = c2s conf k &#8743; &#180;cur (c2s conf k) = None&#10628;]&quot;</span></span></span><span>
</span><span>   </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p2s conf p = c2s conf k &#8743; partst V p &#8800; IDLE 
          &#8743; ((cur V) (c2s conf k) = None &#8744; p2s conf (the ((cur V) (c2s conf k))) = c2s conf k) 
            &#8743; (&#8707;y. (cur V) (c2s conf k) = Some y)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{s. s = V &#10631; partst := (partst V) (the ((cur V) (c2s conf k)) := READY)&#10632;
                                   &#8743; p2s conf p = c2s conf k}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span> 
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>disjI1</span><span class="delimiter">)</span><span> 
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj_surj_c2s</span><span> </span><span>injI</span><span> </span><span>surj_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>inj_eq</span><span class="delimiter">)</span><span>
</span><span>            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span> 
</span><span>            </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cur V (c2s conf k) = None&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>              </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>              </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>inj_surj_c2s</span><span> </span><span>injI</span><span> </span><span>surj_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>inj_eq</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Sched_SatRG</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#915; (Schedule k p) &#8866; Schedule_RGCond k p&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Evt_sat_RG_def</span><span class="delimiter">)</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BasicEvt</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>body_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>guard_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>            </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;&#10627;p2s conf p = c2s conf k &#8743; &#180;cur(c2s conf k) = None &#10628;&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Cond</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Await</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sched_SatRG_h1</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Skip_def</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Await</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Sched_SatRG_h2</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>                  </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Send_Que_Message_SatRG_h1</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8866;<span class="hidden">&#8681;</span><sub>I</sub> Some (&#180;qbuf := &#180;qbuf(ch_srcqport conf p := &#180;qbuf (ch_srcqport conf p) @ [m]);;
       &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p :=
              Suc (&#180;qbufsize (ch_srcqport conf p))))
      sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;is_src_qport conf p &#8743; (&#8707;y. &#180;cur ((c2s conf) k) = Some y) 
              &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))&#10628; &#8745;
             &#10627;&#180;qbufsize (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p)&#10628; &#8745; {V}, 
             {(s, t). s = t}, UNIV, 
            &#10627;&#180;(Pair V) &#8712; &#10627;&#170;cur = &#186;cur &#8743;
                         &#170;partst = &#186;partst &#8743;
                         (&#186;qbufsize (ch_srcqport conf p) =
                          length (&#186;qbuf (ch_srcqport conf p)) &#10230;
                          &#170;qbufsize (ch_srcqport conf p) =
                          length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;&#10628; &#8745; UNIV]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;is_src_qport conf p &#8743; (&#8707;y. (cur V) ((c2s conf) k) = Some y) 
                  &#8743; port_of_part conf p (the ((cur V) ((c2s conf) k)))
                  &#8743; (qbufsize V) (ch_srcqport conf p) &lt; chmax conf (ch_srcqport conf p)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{s. s = V&#10631;qbuf := (qbuf V)(ch_srcqport conf p 
                                    := (qbuf V) (ch_srcqport conf p) @ [m])&#10632;}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Send_Que_Message_SatRG</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#915; (Send_Que_Message k p m) &#8866; Send_Que_Message_RGCond k p m&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Evt_sat_RG_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BasicEvt</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>body_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>guard_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>          </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Await</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Send_Que_Message_SatRG_h1</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Recv_Que_Message_SatRG_h1</span><span class="delimiter">:</span><span> 
</span><span>    </span><span class="string"><span class="delete"><span class="delete">&quot;&#8866;<span class="hidden">&#8681;</span><sub>I</sub> Some (&#180;qbuf := &#180;qbuf(ch_srcqport conf p := tl (&#180;qbuf (ch_srcqport conf p)));;
       &#180;qbufsize := &#180;qbufsize (ch_srcqport conf p := &#180;qbufsize (ch_srcqport conf p) - Suc 0))
     sat<span class="hidden">&#8681;</span><sub>p</sub> [&#10627;is_dest_qport conf p &#8743; (&#8707;y. &#180;cur ((c2s conf) k) = Some y) 
              &#8743; port_of_part conf p (the (&#180;cur ((c2s conf) k)))&#10628; &#8745;
            &#10627;0 &lt; &#180;qbufsize (ch_srcqport conf p)&#10628; &#8745; {V}, 
          {(s, t). s = t}, UNIV, 
          &#10627;&#180;(Pair V) &#8712; &#10627;&#170;cur = &#186;cur &#8743; &#170;partst = &#186;partst &#8743;
                         (&#186;qbufsize (ch_srcqport conf p) = length (&#186;qbuf (ch_srcqport conf p)) &#10230;
                          &#170;qbufsize (ch_srcqport conf p) = length (&#170;qbuf (ch_srcqport conf p))) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbuf c = &#186;qbuf c) &#8743;
                         (&#8704;c. c &#8800; ch_srcqport conf p &#10230; &#170;qbufsize c = &#186;qbufsize c)&#10628;&#10628; &#8745; UNIV]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;is_dest_qport conf p &#8743; (&#8707;y. (cur V) ((c2s conf) k) = Some y) 
                  &#8743; port_of_part conf p (the ((cur V) ((c2s conf) k)))
                  &#8743; 0 &lt; (qbufsize V) (ch_srcqport conf p)&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{s. s = V&#10631;qbuf := (qbuf V)(ch_srcqport conf p := tl ((qbuf V) (ch_srcqport conf p)))&#10632;}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Seq</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>mid</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;{}&quot;</span></span></span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Basic</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>Recv_Que_Message_SatRG</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#915; (Recv_Que_Message k p) &#8866; Recv_Que_Message_RGCond k p&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Evt_sat_RG_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>BasicEvt</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>body_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>guard_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>            </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>Await</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Recv_Que_Message_SatRG_h1</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>stable_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>EvtSys1_on_core_SatRG</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;k. &#915; &#8866; fst (EvtSys1_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys1_on_Core_RGF k))]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys1_on_Core_RGF_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>EvtSys_h</span><span class="delimiter">)</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Sched_SatRG</span><span> </span><span>Schedule_RGF_def</span><span> </span><span>Evt_sat_RG_def</span><span> </span><span>E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> 
</span><span>    </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>snd_conv</span><span> </span><span>fst_conv</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>singletonD</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Send_Que_Message_SatRG</span><span> </span><span>Send_Que_Message_RGF_def</span><span> </span><span>E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> 
</span><span>    </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>snd_conv</span><span> </span><span>fst_conv</span><span> </span><span>Evt_sat_RG_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Recv_Que_Message_SatRG</span><span> </span><span>Recv_Que_Message_RGF_def</span><span> </span><span>E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> 
</span><span>    </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>snd_conv</span><span> </span><span>fst_conv</span><span> </span><span>Evt_sat_RG_def</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarify</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarify</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k x)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>clarify</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712; {(Schedule_RGF k xa)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>  
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(a,b)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712; {(Schedule_RGF k xb)}&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Schedule_RGF_def</span><span> </span><span>Schedule_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;(p, m). {Send_Que_Message_RGF k p m})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Send_Que_Message_RGF_def</span><span> </span><span>Send_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(aa,ba)&#8712;(&#8899;p. {Recv_Que_Message_RGF k p})&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Recv_Que_Message_RGF_def</span><span> </span><span>Recv_Que_Message_RGCond_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>EvtSys_on_core_SatRG</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;&#8704;k. &#915; &#8866; fst (EvtSys_on_Core_RGF k) sat<span class="hidden">&#8681;</span><sub>s</sub> 
              [Pre<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Rely<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Guar<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k)), 
               Post<span class="hidden">&#8681;</span><sub>f</sub> (snd (EvtSys_on_Core_RGF k))]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys_on_Core_RGF_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>              </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>EvtSeq_h</span><span class="delimiter">)</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>E<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Core_Init_RGF_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>Core_Init_SatRG</span><span> </span><span>getrgformula_def</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Evt_sat_RG_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>EvtSys1_on_core_SatRG</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_RGF_def</span><span> </span><span>Core_Init_RGCond_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys1_on_Core_RGF_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_RGF_def</span><span> </span><span>Core_Init_RGCond_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys1_on_Core_RGF_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span> </span><span>Core_Init_RGF_def</span><span class="delimiter">)</span><span>
</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Core_Init_RGF_def</span><span> </span><span>Core_Init_RGCond_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> 
</span><span>          </span><span>getrgformula_def</span><span> </span><span>EvtSys1_on_Core_RGF_def</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys1_on_Core_RGF_def</span><span> </span><span>Core_Init_RGCond_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>EvtSys1_on_Core_RGF_def</span><span> </span><span>Core_Init_RGF_def</span><span> </span><span>Core_Init_RGCond_def</span><span> 
</span><span>          </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;sys_guar &#8801; &#8899;k. ((&#8899;p. schedule_guar k p) &#8746; (&#8899;p. snd_recv_guar p) &#8746; Id &#8746; (core_init_guar k))&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>esys_guar_in_sys</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub> (ARINCXKernel_Spec k) &#8838; sys_guar&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>ARINCXKernel_Spec_def</span><span> </span><span>EvtSys_on_Core_RGF_def</span><span> </span><span>getrgformula_def</span><span> </span><span>sys_guar_def</span><span class="delimiter">)</span><span>
</span><span class="keyword1"><span class="command">by</span></span><span> </span><span>auto</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>spec_sat_rg</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;&#915; &#8866; ARINCXKernel_Spec SAT [{s0}, {}, sys_guar, UNIV]&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>ParallelESys</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>ARINCXKernel_Spec_def</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>EvtSys_on_core_SatRG</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>Guar<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>Post<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>f</sub>_def</span><span class="delimiter">)</span><span>  
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fastforce</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>ARINCXKernel_Spec_def</span><span> </span><span>EvtSys_on_Core_RGF_def</span><span> </span><span>Pre<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>getrgformula_def</span><span> </span><span>s0_def</span><span> </span><span>System_Init_def</span><span class="delimiter">)</span><span> 
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarsimp</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>ARINCXKernel_Spec_def</span><span> </span><span>EvtSys_on_Core_RGF_def</span><span> 
</span><span>        </span><span>Guar<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>Rely<span class="hidden">&#8681;</span><sub>e</sub><span class="hidden">&#8681;</span><sub>s</sub>_def</span><span> </span><span>getrgformula_def</span><span class="delimiter">)</span><span>  
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>metis</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>metis</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>metis</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>esys_guar_in_sys</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span class="delimiter">+</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">subsection</span></span><span> </span><span class="cartouche"><span class="delete"><span class="delete">&#8249;Invariant proof&#8250;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>cur_part_cond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;State &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cur_part_cond s &#8801; &#8704;sched p. (cur s) sched = Some p &#10230; sched = (p2s conf) p&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>cur_part_mode_cond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;State &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;cur_part_mode_cond s &#8801; 
          &#8704;sched p. p2s conf p = sched &#8743; (cur s) sched = Some p &#10230; (partst s) p = RUN&quot;</span></span></span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span>qbuf_size_cond</span><span> </span><span class="delimiter">::</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;State &#8658; bool&quot;</span></span></span><span>
</span><span>  </span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;qbuf_size_cond s &#8801; &#8704;c. (qbufsize s) c = length ((qbuf s) c)&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">definition</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;invariant s &#8801; cur_part_cond s &#8743; cur_part_mode_cond s &#8743; qbuf_size_cond s&quot;</span></span></span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>init_sat_inv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;invariant s0&quot;</span></span></span><span> 
</span><span>  </span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>s0_init</span><span> </span><span>System_Init_def</span><span> </span><span>invariant_def</span><span> </span><span>cur_part_cond_def</span><span> 
</span><span>          </span><span>cur_part_mode_cond_def</span><span> </span><span>qbuf_size_cond_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>stb_guar_coreinit</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;stable (Collect invariant) (core_init_guar k)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command">unfolding</span></span><span> </span><span>stable_def</span><span> </span><span>invariant_def</span><span> </span><span>cur_part_cond_def</span><span> 
</span><span>          </span><span>cur_part_mode_cond_def</span><span> </span><span>qbuf_size_cond_def</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarify</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>presburger</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span> 
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;x = y&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p2s conf p = c2s conf k&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>PartMode.distinct</span><span class="delimiter">(</span><span>3</span><span class="delimiter">)</span><span class="delimiter">)</span><span>
</span><span>          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>no_types</span><span class="delimiter">,</span><span> </span><span>lifting</span><span class="delimiter">)</span><span> </span><span>inj_surj_c2s</span><span> </span><span>surj_def</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>stb_guar_sched</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;stable (Collect invariant) (schedule_guar k p)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span> </span><span>invariant_def</span><span> </span><span>cur_part_cond_def</span><span> 
</span><span>          </span><span>cur_part_mode_cond_def</span><span> </span><span>qbuf_size_cond_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>option.sel</span><span class="delimiter">)</span><span>
</span><span>        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span>option.discI</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span class="delimiter">+</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>case_tac</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;p2s conf pa = c2s conf k&quot;</span></span></span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>auto</span><span class="delimiter">[</span><span>1</span><span class="delimiter">]</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>metis</span><span> </span><span class="delimiter">(</span><span>no_types</span><span class="delimiter">,</span><span> </span><span>lifting</span><span class="delimiter">)</span><span> </span><span>inj_surj_c2s</span><span> </span><span>surj_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>conjI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>blast</span><span>
</span><span>      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span>
</span><span>      </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>simp</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>stb_guar_sndrecvmsg</span><span class="delimiter">:</span><span> 
</span><span>  </span><span class="string"><span class="delete"><span class="delete">&quot;stable (Collect invariant) (snd_recv_guar p)&quot;</span></span></span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span> </span><span>invariant_def</span><span> </span><span>cur_part_cond_def</span><span> </span><span>qbuf_size_cond_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>cur_part_mode_cond_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>impI</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>allI</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>metis</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>stb_pred_rel</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;stable (Collect P) RG &#10233; (s, r) &#8712; RG &#10233; P s &#10233; P r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">by</span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>core_init_g_stb_inv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s,r)&#8712;core_init_guar k &#10233; invariant s &#10233; invariant r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_coreinit</span><span class="delimiter">[</span><span>of</span><span> </span><span>k</span><span class="delimiter">]</span><span> </span><span>stb_pred_rel</span><span class="delimiter">[</span><span>of</span><span> </span><span>invariant</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;core_init_guar k&quot;</span></span></span><span> </span><span>s</span><span> </span><span>r</span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>sched_g_stb_inv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s,r)&#8712;schedule_guar k p &#10233; invariant s &#10233; invariant r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_sched</span><span class="delimiter">[</span><span>of</span><span> </span><span>k</span><span class="delimiter">]</span><span> </span><span>stb_pred_rel</span><span class="delimiter">[</span><span>of</span><span> </span><span>invariant</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;schedule_guar k p&quot;</span></span></span><span> </span><span>s</span><span> </span><span>r</span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>
</span><span class="keyword1"><span class="command">lemma</span></span><span> </span><span>snd_recv_g_stb_inv</span><span class="delimiter">:</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;(s,r)&#8712;snd_recv_guar p &#10233; invariant s &#10233; invariant r&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_sndrecvmsg</span><span class="delimiter">[</span><span>of</span><span> </span><span>p</span><span class="delimiter">]</span><span> </span><span>stb_pred_rel</span><span class="delimiter">[</span><span>of</span><span> </span><span>invariant</span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;snd_recv_guar p&quot;</span></span></span><span> </span><span>s</span><span> </span><span>r</span><span class="delimiter">]</span><span> </span><span class="keyword1"><span class="command">by</span></span><span> </span><span>fast</span><span>
</span><span>
</span><span>
</span><span class="keyword1"><span class="command">theorem</span></span><span> </span><span class="string"><span class="delete"><span class="delete">&quot;invariant_presv_pares &#915; invariant (paresys_spec ARINCXKernel_Spec) {s0} {}&quot;</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>invariant_theorem</span><span class="delimiter">[</span><span class="keyword2"><span class="keyword">where</span></span><span> </span><span>G</span><span class="delimiter">=</span><span class="string"><span class="delete"><span class="delete">&quot;sys_guar&quot;</span></span></span><span> </span><span class="keyword2"><span class="keyword">and</span></span><span> </span><span>pst</span><span> </span><span class="delimiter">=</span><span> </span><span>UNIV</span><span class="delimiter">]</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>spec_sat_rg</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fast</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>sys_guar_def</span><span class="delimiter">)</span><span>
</span><span>  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>stable_un_S</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarify</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>stable_un_R</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>stable_un_R</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>stable_un_R</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_sched</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span class="delimiter">(</span><span>smt</span><span> </span><span>stable_def</span><span> </span><span>UN_iff</span><span> </span><span>Un_iff</span><span> </span><span>mem_Collect_eq</span><span class="delimiter">)</span><span> 
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>rule</span><span> </span><span>stable_un_S</span><span class="delimiter">)</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>clarify</span><span> </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_sndrecvmsg</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fast</span><span>
</span><span>    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span class="delimiter">(</span><span>simp</span><span> </span><span>add</span><span class="delimiter">:</span><span>stable_def</span><span class="delimiter">)</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>stb_guar_coreinit</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>fast</span><span>
</span><span>    </span><span class="keyword1"><span class="command">using</span></span><span> </span><span>init_sat_inv</span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command">apply</span></span></span></span><span> </span><span>simp</span><span> 
</span><span class="keyword1"><span class="command"><span class="improper"><span class="command">done</span></span></span></span><span>
</span><span>
</span><span class="keyword2"><span class="keyword">end</span></span></pre>

</div>
</body>
</html>
